{"version":3,"sources":["./src/app/page/customer-support/user-manual/manual-detail/manual-detail-routing.module.ts","./src/app/page/customer-support/user-manual/manual-detail/manual-detail.module.ts","./src/app/page/customer-support/user-manual/manual-detail/manual-detail.page.ts","./src/app/page/customer-support/user-manual/manual-detail/manual-detail.page.scss","./src/app/page/customer-support/user-manual/manual-detail/manual-detail.page.html"],"names":[],"mappings":"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","file":"default-src_app_page_customer-support_user-manual_manual-detail_manual-detail_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ManualDetailPage } from './manual-detail.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ManualDetailPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ManualDetailPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ManualDetailPageRoutingModule } from './manual-detail-routing.module';\n\nimport { ManualDetailPage } from './manual-detail.page';\nimport { ComponentModule } from 'src/app/component/component.module';\nimport { PipesModule } from 'src/app/basic/pipes/pipes.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentModule,\n    PipesModule,\n    ManualDetailPageRoutingModule\n  ],\n  declarations: [ManualDetailPage]\n})\nexport class ManualDetailPageModule {}\n","import { ChangeDetectorRef, Component, ElementRef, Input, OnInit } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { Validator, ConnectResult, ConnectService } from 'src/app/basic/service/core/connect.service';\nimport { UserService } from 'src/app/basic/service/core/user.service';\nimport { AlertService } from 'src/app/basic/service/ionic/alert.service';\nimport { NavService } from 'src/app/basic/service/ionic/nav.service';\nimport { ToastService } from 'src/app/basic/service/ionic/toast.service';\nimport { DateService } from 'src/app/basic/service/util/date.service';\nimport { PromiseService } from 'src/app/basic/service/util/promise.service';\nimport { RegexService } from 'src/app/basic/service/util/regex.service';\nimport { environment } from 'src/environments/environment';\nimport { ManualEditPage, ManualUpdateForm } from '../manual-edit/manual-edit.page';\n\n@Component({\n  selector: 'app-manual-detail',\n  templateUrl: './manual-detail.page.html',\n  styleUrls: ['./manual-detail.page.scss'],\n})\nexport class ManualDetailPage implements OnInit {\n  @Input() manual_id:number;\n\n  permission = {\n    edit: false\n  }\n\n  form = new ManualUpdateForm();\n  validator = new Validator(new ManualUpdateForm()).validator;\n  res:ConnectResult;\n\n  constructor(\n    private el: ElementRef<HTMLElement>,\n    private alert: AlertService,\n    private connect: ConnectService,\n    private nav: NavService,\n    private date: DateService,\n    private user: UserService,\n    public regex: RegexService,\n    private promise: PromiseService,\n    private toast: ToastService,\n    private _modal: ModalController,\n    private changeDetector: ChangeDetectorRef\n  ) { }\n\n  ngOnInit() {\n    if(this.manual_id) {\n      this.getPermission();\n\n      this.form.manual_id = this.manual_id;\n      this.get();\n    } else {\n      this.toast.present({ color: 'warning', message: '잘못된 접근입니다.' });\n      this._modal.dismiss();\n    }\n    this.test();\n  }\n  public async test() {\n    if(!environment.test.core.test) return;\n    if(!environment.test.UserManual.test) return;\n\n    const el = this.el.nativeElement;\n    await this.promise.wait();\n    \n    if(this.permission.edit) {\n      const editIndex = environment.test.UserManual.type.indexOf('EDIT');\n      if(editIndex > -1) {\n        // 수정\n        el.querySelector('[name=edit]').dispatchEvent(new Event('click'));\n        await this.promise.wait();\n        await this.promise.toggleWait(async() => {\n          const modal = await this._modal.getTop();\n          const elEdit = modal?.querySelector('app-manual-edit');\n          return elEdit;\n        });\n        return;\n      }\n\n      const removeIndex = environment.test.UserManual.type.indexOf('REMOVE');\n      if(removeIndex > -1) {\n        // 삭제\n        el.querySelector('[name=remove]').dispatchEvent(new Event('click'));\n        await this.promise.wait();\n        \n        const alertButtons = document.querySelector('ion-alert').querySelectorAll('[type=button]');\n        alertButtons[1].dispatchEvent(new Event('click'));\n        return;\n      }\n    } else {\n      // 닫기\n      el.querySelector('name=dismiss').dispatchEvent(new Event('click'));\n    }\n  }\n\n  private getPermission() {\n    this.permission.edit = this.user.userData.user_role === 'LH_HEAD';\n    console.log(this.permission);\n  }\n\n  private async get() {\n    const res = await this.connect.run('/support/manual/get', {\n      manual_id: this.form.manual_id\n    }, {\n      parse: ['ctgo_manual_ids', 'manual_ctgo_data', 'manual_file_data']\n    });\n    if(res.rsCode === 0) {\n      this.form = {\n        ...this.form,\n        ...res.rsObj\n      }\n    } else {\n      this.connect.error('error', res);\n    }\n  }\n\n  public async remove() {\n    this.alert.present({\n      header: '사용자 매뉴얼 삭제',\n      message: '사용자 매뉴얼을 삭제하시겠습니까?',\n      buttons: [\n        { text: '취소' },\n        { text: '삭제', handler: async() => {\n          const res = await this.connect.run('/support/manual/delete', {\n            manual_ids: [this.form.manual_id]\n          }, {\n            loading: true\n          });\n          if(res.rsCode === 0) {\n            this._modal.dismiss(true);\n          } else {\n            this.toast.present({ color: 'warning', message: res.rsMsg });\n          }\n        }}\n      ]\n    });\n  }\n\n  public async edit() {\n    const modal = await this._modal.create({\n      component: ManualEditPage,\n      componentProps: {\n        manual_id: this.form.manual_id\n      }\n    });\n    modal.present();\n    const { data } = await modal.onDidDismiss();\n    if(data) {\n      setTimeout(() => {\n        this._modal.dismiss(data);\n      }, 100);\n    }\n  }\n}\n","export default \"app-row {\\n  align-items: flex-start;\\n}\\n\\np {\\n  color: var(--ion-color-dark);\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hbnVhbC1kZXRhaWwucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksdUJBQXVCO0FBQzNCOztBQUNBO0VBQ0ksNEJBQTRCO0FBRWhDIiwiZmlsZSI6Im1hbnVhbC1kZXRhaWwucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiYXBwLXJvdyB7XG4gICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XG59XG5wIHtcbiAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLWRhcmspO1xufSJdfQ== */\";","export default \"<ion-header>\\n  <ion-toolbar color=\\\"white\\\">\\n    <ion-title>사용자 매뉴얼</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <app-dismiss-button name=\\\"dismiss\\\"></app-dismiss-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n  <h4>사용자 매뉴얼</h4>\\n  <app-card>\\n    <app-row mobileBreak>\\n      <app-col>\\n        <app-row>\\n          <app-col size=\\\"100px\\\">\\n            <dt>회사명</dt>\\n          </app-col>\\n          <app-col>\\n            <dd>한국토지주택공사</dd>\\n          </app-col>\\n        </app-row>\\n      </app-col>\\n      <app-col>\\n        <app-row>\\n          <app-col size=\\\"100px\\\">\\n            <dt>구분</dt>\\n          </app-col>\\n          <app-col>\\n            <dd>\\n              <span *ngFor=\\\"let menual_ctgo of form.manual_ctgo_data; let l = last\\\">\\n                {{ menual_ctgo.ctgo_manual_name }}\\n                <span *ngIf=\\\"!l\\\">/</span>\\n              </span>\\n\\n              <span *ngIf=\\\"!form.manual_ctgo_data\\\">전체</span>\\n            </dd>\\n          </app-col>\\n        </app-row>\\n      </app-col>\\n    </app-row>\\n    <app-row mobileBreak>\\n      <app-col>\\n        <app-row>\\n          <app-col size=\\\"100px\\\">\\n            <dt>작성일</dt>\\n          </app-col>\\n          <app-col>\\n            <dd>{{ form.create_date }}</dd>\\n          </app-col>\\n        </app-row>\\n      </app-col>\\n      <app-col>\\n        <app-row>\\n          <app-col size=\\\"100px\\\">\\n            <dt>작성자</dt>\\n          </app-col>\\n          <app-col>\\n            <dd>{{ form.create_user_name }}</dd>\\n          </app-col>\\n        </app-row>\\n      </app-col>\\n    </app-row>\\n  </app-card>\\n\\n  <app-card>\\n    <app-row mobileBreak>\\n      <app-col size=\\\"100px\\\">\\n        <dt>제목</dt>\\n      </app-col>\\n      <app-col>\\n        <dd>{{ form.manual_title }}</dd>\\n      </app-col>\\n    </app-row>\\n    <app-row mobileBreak>\\n      <app-col size=\\\"100px\\\">\\n        <dt>내용</dt>\\n      </app-col>\\n      <app-col>\\n        <dd style=\\\"min-height: 200px;\\\" [innerHtml]=\\\"form.manual_text\\\"></dd>\\n      </app-col>\\n    </app-row>\\n  </app-card>\\n  <ng-container *ngIf=\\\"form.manual_file_data && form.manual_file_data.length\\\">\\n    <h4>\\n      첨부자료\\n    </h4>\\n    <app-file-preview *ngFor=\\\"let futItem of form.manual_file_data; let i = index;\\\" [futItem]=\\\"futItem\\\" [readonly]=\\\"true\\\"></app-file-preview>\\n  </ng-container>\\n</ion-content>\\n<app-button-footer *ngIf=\\\"permission.edit\\\">\\n  <app-button name=\\\"remove\\\" (click)=\\\"remove()\\\">삭제</app-button>\\n  <app-button name=\\\"edit\\\" (click)=\\\"edit()\\\">수정</app-button>\\n</app-button-footer>\\n\";"],"sourceRoot":"webpack:///"}