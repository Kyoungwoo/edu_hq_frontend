{"version":3,"sources":["./src/app/page/member-management/member-management/worker-info-list/worker-info-list-routing.module.ts","./src/app/page/member-management/member-management/worker-info-list/worker-info-list.module.ts","./src/app/page/member-management/member-management/worker-info-list/worker-info-list.page.ts","./src/app/page/member-management/member-management/worker-info-list/worker-info-list.page.scss","./src/app/page/member-management/member-management/worker-info-list/worker-info-list.page.html"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACc;AAEM;AAE7D,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,sEAAkB;KAC9B;CACF,CAAC;IAMW,+BAA+B,SAA/B,+BAA+B;CAAG;AAAlC,+BAA+B;IAJ3C,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,+BAA+B,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;AChBH;AACM;AACF;AAEA;AAEuC;AAEvB;AACQ;AACkB;IAa1E,wBAAwB,SAAxB,wBAAwB;CAAG;AAA3B,wBAAwB;IAXpC,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,+EAAe;YACf,6FAA+B;YAC/B,+FAAwB;SACzB;QACD,YAAY,EAAE,CAAC,sEAAkB,CAAC;KACnC,CAAC;GACW,wBAAwB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvBa;AACD;AAC0C;AACrB;AACD;AACI;AACH;AAC+C;AACtC;AAExE,MAAM,UAAU;CAoBtB;IAOY,kBAAkB,SAAlB,kBAAkB;IAuB7B,YACU,OAAuB,EACvB,KAAuB,EACvB,IAAiB,EACjB,IAAiB,EACjB,KAAmB,EACnB,GAAe;QALf,YAAO,GAAP,OAAO,CAAgB;QACvB,UAAK,GAAL,KAAK,CAAkB;QACvB,SAAI,GAAJ,IAAI,CAAa;QACjB,SAAI,GAAJ,IAAI,CAAa;QACjB,UAAK,GAAL,KAAK,CAAc;QACnB,QAAG,GAAH,GAAG,CAAY;QA3BzB,SAAI,GAAG;YACL,UAAU,EAAE,CAAC;YACb,qBAAqB,EAAE,EAAE;YACzB,UAAU,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC;YACzC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YAC3B,UAAU,EAAE,CAAC;YACb,WAAW,EAAE,EAAE;YACf,kBAAkB,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,UAAU;YAC7D,mBAAmB,EAAE,EAAE;YACvB,QAAQ,EAAE,CAAC;YACX,UAAU,EAAE,KAAK;YACjB,kBAAkB,EAAE,KAAK;SAC1B;QAID,eAAU,GAAG;YACX,aAAa,EAAE,KAAK;YACpB,QAAQ,EAAE,KAAK,CAAC,UAAU;SAC3B;IASG,CAAC;IAEL,QAAQ;QACN,IAAG,CAAC,IAAI,CAAC,aAAa,EAAE,EAAE;YACxB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,SAAS,EAAE,OAAO,EAAE,YAAY,EAAE,CAAC,CAAC;YAChE,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;SACjC;aAAM;YACL,IAAI,CAAC,GAAG,EAAE,CAAC;SACZ;IACH,CAAC;IAED,aAAa;QACX,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,WAAW,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;QACjE,IAAG,SAAS,KAAK,cAAc,IAAI,SAAS,KAAK,iBAAiB;YAAE,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,WAAW,CAAC,UAAU,CAAC;QAElH,IAAG,SAAS,KAAK,IAAI,EAAE;YACrB,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;YACzB,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;YAEzB,IAAI,CAAC,UAAU,CAAC,aAAa,GAAG,IAAI,CAAC;YACrC,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,KAAK,CAAC;YACjC,OAAO,IAAI,CAAC;SACb;aACI,IAAG,SAAS,KAAK,aAAa,EAAE;YACnC,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,WAAW,CAAC,UAAU,CAAC;YAC9C,iDAAiD;YAEjD,IAAI,CAAC,UAAU,CAAC,aAAa,GAAG,KAAK,CAAC;YACtC,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC;YAChC,OAAO,IAAI,CAAC;SACb;aACI,IAAG,SAAS,KAAK,cAAc,EAAE;YACpC,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,WAAW,CAAC,UAAU,CAAC;YAC9C,iDAAiD;YAEjD,IAAI,CAAC,UAAU,CAAC,aAAa,GAAG,KAAK,CAAC;YACtC,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC;YAChC,OAAO,IAAI,CAAC;SACb;aACI;YACH,OAAO,KAAK,CAAC;SACd;IACH,CAAC;IAGK,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ;;YACrC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;YAC9B,MAAM,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC;YAC5C,IAAI,CAAC,IAAI,CAAC,mBAAmB,GAAG,SAAS,CAAC;YAC1C,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,8BAA8B,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YAC9E,IAAG,GAAG,CAAC,MAAM,KAAK,CAAC,EAAG;gBACpB,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;gBACf,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE;oBAC7B,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAC5D,CAAC,CAAC,CAAC;aACJ;iBAAM,IAAG,GAAG,CAAC,MAAM,KAAK,IAAI,EAAE;gBAC7B,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;gBAChB,SAAS;aACV;iBACI,IAAG,GAAG,CAAC,MAAM,KAAK,IAAI,IAAI,GAAG,CAAC,MAAM,KAAK,IAAI,EAAE;gBAClD,eAAe;gBACf,IAAI,CAAC,WAAW,EAAE,CAAC;aACpB;iBAAM;gBACL,uBAAuB;gBACvB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC;aAC9D;QACH,CAAC;KAAA;IAEK,IAAI,CAAC,IAAI;;YACb,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;gBACpC,SAAS,EAAC,uFAAkB;gBAC5B,cAAc,EAAC;oBACb,IAAI;iBACL;aACF,CAAC,CAAC;YACH,KAAK,CAAC,OAAO,EAAE,CAAC;YAChB,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,KAAK,CAAC,YAAY,EAAE,CAAC;YAC5C,IAAG,IAAI;gBAAE,IAAI,CAAC,GAAG,EAAE,CAAC;QACtB,CAAC;KAAA;IAEK,WAAW;;YACf,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;gBACpC,SAAS,EAAE,0HAAyB;gBACpC,eAAe,EAAC,KAAK;gBACrB,QAAQ,EAAC,yBAAyB;aACnC,CAAC,CAAC;YACH,KAAK,CAAC,OAAO,EAAE,CAAC;YAChB,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,KAAK,CAAC,YAAY,EAAE,CAAC;YAC5C,IAAG,IAAI;gBAAE,IAAI,CAAC,GAAG,EAAE,CAAC;QACtB,CAAC;KAAA;CACF;;YA3JuB,sFAAc;YAD7B,4DAAe;YAEf,gFAAW;YAGX,gFAAW;YADX,mFAAY;YADZ,+EAAU;;AAiCN,kBAAkB;IAL9B,yDAAS,CAAC;QACT,QAAQ,EAAE,sBAAsB;QAChC,qFAA2C;;KAE5C,CAAC;GACW,kBAAkB,CAwH9B;AAxH8B;;;;;;;;;;;;;;;;ACrC/B,iEAAe,8CAA8C,+HAA+H,E;;;;;;;;;;;;;;;ACA5L,iEAAe,6PAA6P,0LAA0L,4JAA4J,8sEAA8sE,wBAAwB,iIAAiI,meAAme,cAAc,2BAA2B,+BAA+B,2BAA2B,qBAAqB,2BAA2B,kBAAkB,2BAA2B,kCAAkC,2BAA2B,gCAAgC,2GAA2G,6BAA6B,+FAA+F,6BAA6B,gJAAgJ,oBAAoB,qGAAqG,oBAAoB,0DAA0D,2BAA2B,2BAA2B,oBAAoB,gCAAgC,kCAAkC,kRAAkR,E","file":"src_app_page_member-management_member-management_worker-info-list_worker-info-list_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { WorkerInfoListPage } from './worker-info-list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: WorkerInfoListPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class WorkerInfoListPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { WorkerInfoListPageRoutingModule } from './worker-info-list-routing.module';\n\nimport { WorkerInfoListPage } from './worker-info-list.page';\nimport { ComponentModule } from 'src/app/component/component.module';\nimport { WorkerInfoEditPageModule } from '../worker-info-edit/worker-info-edit.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentModule,\n    WorkerInfoListPageRoutingModule,\n    WorkerInfoEditPageModule\n  ],\n  declarations: [WorkerInfoListPage]\n})\nexport class WorkerInfoListPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { ConnectResult, ConnectService } from 'src/app/basic/service/core/connect.service';\nimport { UserService } from 'src/app/basic/service/core/user.service';\nimport { NavService } from 'src/app/basic/service/ionic/nav.service';\nimport { ToastService } from 'src/app/basic/service/ionic/toast.service';\nimport { DateService } from 'src/app/basic/service/util/date.service';\nimport { SecurityPasswordComponent } from '../../member-approval-wait/security-password/security-password.component';\nimport { WorkerInfoEditPage } from '../worker-info-edit/worker-info-edit.page';\n\nexport class WorkerInfo {\n  ctgo_construction_id: number;\n  ctgo_job_position_name_kr: string;\n  delete_state: number;\n  company_id: number;\n  ctgo_job_position_id: number;\n  user_name: string;\n  ctgo_construction_name: string;\n  ctgo_occupation_name_kr: string;\n  ctgo_country_name_kr: string;\n  ctgo_occupation_id: number;\n  user_id: number;\n  company_name: string;\n  ctgo_country_id: number;\n  create_date: string;\n  user_health: string;\n  row_count: number;\n  work_state: string;\n  construction_state: string;\n  index: number;\n}\n\n@Component({\n  selector: 'app-worker-info-list',\n  templateUrl: './worker-info-list.page.html',\n  styleUrls: ['./worker-info-list.page.scss'],\n})\nexport class WorkerInfoListPage implements OnInit {\n\n  form = {\n    company_id: 0,\n    ctgo_construction_ids: [],\n    start_date: this.date.today({ year: -3 }),\n    end_date: this.date.today(),\n    project_id: 0,\n    search_text: '',\n    session_company_id: this.user.userData.belong_data.company_id,\n    user_manage_session: '',\n    limit_no: 0,\n    work_state: '출역중',\n    construction_state: '출역중'\n  }\n\n  res:ConnectResult<WorkerInfo>\n\n  permission = {\n    companyChange: false, // 회사 변경 권한\n    approval: false // 가입승인 권한\n  }\n\n  constructor(\n    private connect: ConnectService,\n    private modal : ModalController,\n    private user: UserService,\n    private date: DateService,\n    private toast: ToastService,\n    private nav: NavService,\n  ) { }\n\n  ngOnInit() {\n    if(!this.getPermission()) {\n      this.toast.present({ color: 'warning', message: '잘못된 접근입니다.' }); \n      this.nav.navigateRoot('/login'); \n    } else {\n      this.get();\n    }\n  }\n\n  getPermission() {\n    const { user_role, user_type, belong_data } = this.user.userData;\n    if(user_role === 'PARTNER_HEAD' || user_role === 'PARTNER_GENERAL') this.form.company_id = belong_data.company_id;\n\n    if(user_type === 'LH') {\n      this.form.project_id = 0;\n      this.form.company_id = 0;\n      \n      this.permission.companyChange = true;\n      this.permission.approval = false;\n      return true;\n    }\n    else if(user_role === 'MASTER_HEAD') {\n      this.form.project_id = belong_data.project_id;\n      // this.form.company_id = belong_data.company_id;\n\n      this.permission.companyChange = false;\n      this.permission.approval = true;\n      return true;\n    }\n    else if(user_role === 'PARTNER_HEAD') {\n      this.form.project_id = belong_data.project_id;\n      // this.form.company_id = belong_data.company_id;\n\n      this.permission.companyChange = false;\n      this.permission.approval = true;\n      return true;\n    } \n    else {\n      return false;\n    }\n  }\n  \n\n  async get(limit_no = this.form.limit_no) {\n    this.form.limit_no = limit_no;\n    const authToken = this.user.memberAuthToken;\n    this.form.user_manage_session = authToken;\n    const res = await this.connect.run('/usermanage/info/worker/list', this.form);\n    if(res.rsCode === 0 ) {\n      this.res = res;\n      this.res.rsMap.map((item, i) => {\n        item.index = res.rsObj.row_count - this.form.limit_no - i;\n      });\n    } else if(res.rsCode === 1008) {\n      this.res = null;\n      // 데이터 없음\n    }\n    else if(res.rsCode === 3008 || res.rsCode === 3009) {\n      // 비밀번호 없거나 틀렸음\n      this.getPassword();\n    } else {\n      // 그외. 인터넷안됨, 서버연결안됨 등등\n      this.toast.present({ color: 'warning', message: res.rsMsg });\n    }\n  }\n\n  async edit(item) {\n    const modal = await this.modal.create({\n      component:WorkerInfoEditPage,\n      componentProps:{\n        item\n      }\n    });\n    modal.present();\n    const { data } = await modal.onDidDismiss();\n    if(data) this.get();\n  }\n\n  async getPassword() {\n    const modal = await this.modal.create({\n      component: SecurityPasswordComponent,\n      backdropDismiss:false,\n      cssClass:\"security-password-modal\"\n    });\n    modal.present();\n    const { data } = await modal.onDidDismiss();\n    if(data) this.get();\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ3b3JrZXItaW5mby1saXN0LnBhZ2Uuc2NzcyJ9 */\";","export default \"<ng-container *mobileHidden>\\n  <app-header-admin></app-header-admin>\\n  <!-- <ion-toolbar color=\\\"white\\\">s\\n    <ion-title>\\n      <h4>작업자 정보</h4>\\n    </ion-title>\\n  </ion-toolbar> -->\\n  <ion-content>\\n    <app-row style=\\\"align-items: flex-start;\\\">\\n      <app-col size=\\\"280px\\\">\\n        <app-table type=\\\"card\\\">\\n          <ion-toolbar slot=\\\"top\\\" color=\\\"white\\\">\\n            <app-row style=\\\"justify-content: space-between;\\\">\\n              <app-col size=\\\"auto\\\"><h5>필터</h5></app-col>\\n              <app-col size=\\\"auto\\\"><app-button fill=\\\"translucent\\\" style=\\\"width: 100px;\\\" (click)=\\\"get(0)\\\">검색</app-button></app-col>\\n            </app-row>\\n          </ion-toolbar>\\n          <tbody>\\n            <tr>\\n              <td>\\n                <app-select-scene name=\\\"project_id\\\" [(ngModel)]=\\\"form.project_id\\\" [all]=\\\"true\\\"></app-select-scene>\\n              </td>\\n            </tr>\\n            <tr>\\n              <td>\\n                <app-select-company name=\\\"company_id\\\" [project_id]=\\\"form.project_id\\\" [(ngModel)]=\\\"form.company_id\\\" [all]=\\\"true\\\"></app-select-company>\\n              </td>\\n            </tr>\\n            <tr>\\n              <td>\\n                <app-select-construction name=\\\"ctgo_construction_id\\\" [project_id]=\\\"form.project_id\\\" [(ngModel)]=\\\"form.ctgo_construction_ids\\\" [all]=\\\"true\\\" [multiple]=\\\"true\\\"></app-select-construction>\\n              </td>\\n            </tr>\\n            <tr>\\n              <td>\\n                <app-input-group label=\\\"가입일\\\">\\n                  <app-calendar [(ngModel)]=\\\"form.start_date\\\" [max]=\\\"form.end_date\\\"></app-calendar>\\n                  ~\\n                  <app-calendar [(ngModel)]=\\\"form.end_date\\\" [min]=\\\"form.start_date\\\"></app-calendar>\\n                </app-input-group>\\n              </td>\\n            </tr>\\n\\n            <tr>\\n              <td>\\n                <!-- <app-radio-input label=\\\"재직 상태\\\" [(ngModel)]=\\\"form.work_state\\\">\\n                  <app-radio value=\\\"전체\\\">전체</app-radio>\\n                  <app-radio value=\\\"출역중\\\">출역 중</app-radio>\\n                  <app-radio value=\\\"출역종료\\\">출역 종료</app-radio>\\n                </app-radio-input> -->\\n\\n                <app-select label=\\\"출역 상태\\\" [(ngModel)]=\\\"form.construction_state\\\">\\n                  <app-select-option value=\\\"출역중\\\">출역 중</app-select-option>\\n                  <app-select-option value=\\\"출역종료\\\">출역 종료</app-select-option>\\n                </app-select>\\n              </td>\\n            </tr>\\n            \\n            <tr>\\n              <td>\\n                <app-input label=\\\"검색어\\\" [(ngModel)]=\\\"form.search_text\\\" placeholder=\\\"검색어를 입력해 주세요.\\\"></app-input>\\n              </td>\\n            </tr>\\n          </tbody>\\n        </app-table>\\n      </app-col>\\n      <app-col>\\n        <ion-toolbar color=\\\"white\\\">\\n          <h5>작업자 목록 (총 {{res?.rsObj?.row_count }}건)</h5>\\n        </ion-toolbar>\\n        <app-table>\\n          <thead>\\n            <tr>\\n              <th style=\\\"width: 48px;\\\">No</th>\\n              <th>공종</th>\\n              <th>업체명</th>\\n              <th>성명</th>\\n              <th>직위</th>\\n              <th>직종</th>\\n              <th>국적</th>\\n              <th>건강문진</th>\\n              <th>출역상태</th>\\n              <th>가입일</th>\\n              <!-- <th>재직상태</th> -->\\n            </tr>\\n          </thead>\\n          <tbody>\\n            <tr class=\\\"button\\\" *ngFor=\\\"let item of res?.rsMap let i = index\\\" (click)=\\\"edit(item)\\\">\\n              <td>{{ item.index }}</td>\\n              <td>{{ item.ctgo_construction_name }}</td>\\n              <td>{{ item.company_name }}</td>\\n              <td>{{ item.user_name }}</td>\\n              <td>{{ item.ctgo_job_position_name_kr }}</td>\\n              <td>{{ item.ctgo_occupation_name_kr }}</td>\\n              <td>\\n                <ion-text *ngIf=\\\"item.ctgo_country_id === 1\\\" color=\\\"dark\\\">{{ item.ctgo_country_name_kr }}</ion-text>\\n                <ion-text *ngIf=\\\"item.ctgo_country_id !== 1\\\" color=\\\"danger\\\">{{ item.ctgo_country_name_kr }}</ion-text>\\n              </td>\\n              <td>\\n                <ion-text [color]=\\\"item.user_health === '특별관리대상' ? 'danger' : 'dark'\\\">{{ item.user_health }}</ion-text>\\n                <!-- <ion-text *ngIf=\\\"item.user_health !== '특별관리대상'\\\" color=\\\"dark\\\">{{ item.user_health }}</ion-text> -->\\n              </td>\\n              <td>{{ item.construction_state }}</td>\\n              <td>{{ item.create_date }}</td>\\n              <!-- <td>{{ item.delete_state ? '재직중':'퇴사' }}</td> -->\\n            </tr>\\n          </tbody>\\n        </app-table>\\n        <app-pager [totalCount]=\\\"res?.rsObj?.row_count\\\" [limitNo]=\\\"form.limit_no\\\" (pagerChange)=\\\"get($event)\\\"></app-pager>\\n      </app-col>\\n    </app-row>\\n  </ion-content>\\n</ng-container>\\n\\n\";"],"sourceRoot":"webpack:///"}