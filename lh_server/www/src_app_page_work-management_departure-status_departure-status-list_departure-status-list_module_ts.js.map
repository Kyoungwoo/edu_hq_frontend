{"version":3,"sources":["./src/app/page/work-management/departure-status/departure-status-list/departure-status-list-routing.module.ts","./src/app/page/work-management/departure-status/departure-status-list/departure-status-list.module.ts","./src/app/page/work-management/departure-status/departure-status-list/departure-status-list.page.ts","./src/app/page/work-management/departure-status/departure-status-list/departure-status-list.page.scss","./src/app/page/work-management/departure-status/departure-status-list/departure-status-list.page.html"],"names":[],"mappings":"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","file":"src_app_page_work-management_departure-status_departure-status-list_departure-status-list_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DepartureStatusListPage } from './departure-status-list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DepartureStatusListPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DepartureStatusListPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DepartureStatusListPageRoutingModule } from './departure-status-list-routing.module';\n\nimport { DepartureStatusListPage } from './departure-status-list.page';\nimport { ComponentModule } from 'src/app/component/component.module';\nimport { TodayDepartureStatusListPageModule } from '../today-departure-status-list/today-departure-status-list.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentModule,\n    DepartureStatusListPageRoutingModule,\n    TodayDepartureStatusListPageModule\n  ],\n  declarations: [DepartureStatusListPage]\n})\nexport class DepartureStatusListPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { ConnectResult, ConnectService } from 'src/app/basic/service/core/connect.service';\nimport { UserService } from 'src/app/basic/service/core/user.service';\nimport { ToastService } from 'src/app/basic/service/ionic/toast.service';\nimport { DateService } from 'src/app/basic/service/util/date.service';\nimport { PromiseService } from 'src/app/basic/service/util/promise.service';\nimport { DepartureStatusListForm, DepartureStatusListItem, TodayDepartureStatusListPage } from '../today-departure-status-list/today-departure-status-list.page';\n\n@Component({\n  selector: 'app-departure-status-list',\n  templateUrl: './departure-status-list.page.html',\n  styleUrls: ['./departure-status-list.page.scss'],\n})\nexport class DepartureStatusListPage implements OnInit {\n\n  form:DepartureStatusListForm = {\n    project_id: this.user.userData.belong_data.project_id, // 현장 ID\n    master_company_id: this.user.userData.belong_data.master_company_id ? this.user.userData.belong_data.master_company_id : this.user.userData.belong_data.company_id, // 원청사 ID\n    ctgo_construction_ids: [], // 공종 ID\n    start_date: this.date.today({ month: -1 }), // 검색 시작일\n    end_date: this.date.today(), // 검색 종료일\n    limit_no: 0 // limit_no\n  }\n\n  res:ConnectResult<DepartureStatusListItem>;\n\n  permission = {\n    contractor: false\n  }\n\n  constructor(\n    private modal: ModalController,\n    private connect: ConnectService,\n    public user: UserService,\n    private toast: ToastService,\n    private date: DateService,\n    private promise: PromiseService\n  ) { }\n\n  ngOnInit() {\n    this.getPromission();\n    // this.getForm();\n    setTimeout(() => {\n      this.getList();\n    },300);\n  }\n\n  getPromission() {\n    const { user_type } = this.user.userData;\n    if(user_type === 'LH') {\n      this.permission.contractor = true;\n    }\n    else {\n      this.permission.contractor = false;\n    }\n  }\n  // getForm() {\n  //   const { user_type, belong_data } = this.user.userData;\n  //   if(user_type === 'LH') {\n  //     this.form.master_company_id = 0;\n  //   } else {\n  //     this.form.master_company_id = belong_data.company_id;\n  //   }\n  // }\n\n  async getList(limit_no = this.form.limit_no) {\n    await this.promise.wait(() => this.form.master_company_id);\n    \n    this.form.limit_no = limit_no;\n    this.res = await this.connect.run('/work_state/list', this.form, { loading: true });\n    if(this.res.rsCode !== 0) {\n      this.toast.present({ color: 'warning', message: this.res.rsMsg });\n    }\n  }\n\n  async detail(item) {\n    console.log(\"detail - \", this.form);\n    const modal = await this.modal.create({\n      component: TodayDepartureStatusListPage,\n      cssClass: 'today-departure-status-list-modal',\n      componentProps:{\n        listForm: this.form,\n        item\n      }\n    });\n    modal.present();\n    const { data } = await modal.onDidDismiss();\n    if(data) {\n      this.getList();\n    }\n  }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJkZXBhcnR1cmUtc3RhdHVzLWxpc3QucGFnZS5zY3NzIn0= */\";","export default \"<app-header-admin></app-header-admin>\\n\\n<ion-content [scrollX]=\\\"true\\\" style=\\\"--padding-top:15px\\\">\\n  <app-container>\\n    <app-row style=\\\"align-items: flex-start;\\\">\\n      <app-col size=\\\"280px\\\">\\n        <app-table type=\\\"card\\\">\\n          <ion-toolbar slot=\\\"top\\\" color=\\\"white\\\">\\n            <app-row style=\\\"justify-content: space-between;\\\">\\n              <app-col size=\\\"auto\\\"><h5>필터</h5></app-col>\\n              <app-col size=\\\"auto\\\">\\n                <app-button fill=\\\"translucent\\\" style=\\\"width: 100px;\\\" (click)=\\\"getList(0)\\\">검색</app-button>\\n              </app-col>\\n            </app-row>\\n          </ion-toolbar>\\n          <tbody>\\n            <tr>\\n              <td>\\n                <app-select-scene [(ngModel)]=\\\"form.project_id\\\"></app-select-scene>\\n              </td>\\n            </tr>\\n            <tr>\\n              <td>\\n                <app-select-contractor [project_id]=\\\"form.project_id\\\" [(ngModel)]=\\\"form.master_company_id\\\" [readonly]=\\\"!permission.contractor\\\"></app-select-contractor> \\n              </td>\\n            </tr>\\n            <tr>\\n              <td>\\n                <app-select-construction [master_company_id]=\\\"form.master_company_id\\\" [project_id]=\\\"form.project_id\\\" [(ngModel)]=\\\"form.ctgo_construction_ids\\\" [all]=\\\"true\\\" [multiple]=\\\"true\\\"></app-select-construction>\\n              </td>\\n            </tr>\\n            <tr>\\n              <td>\\n                <app-input-group label=\\\"기간\\\">\\n                  <app-calendar [(ngModel)]=\\\"form.start_date\\\" [max]=\\\"form.end_date\\\"></app-calendar>\\n                  ~\\n                  <app-calendar [(ngModel)]=\\\"form.end_date\\\" [min]=\\\"form.start_date\\\"></app-calendar>\\n                </app-input-group>\\n              </td>\\n            </tr>\\n          </tbody>\\n        </app-table>\\n      </app-col>\\n      <app-col>        \\n        <ion-toolbar color=\\\"white\\\">\\n          <h5>출역 현황 (총 {{ res?.rsObj?.row_count || 0}}건)</h5>\\n        </ion-toolbar>\\n        <app-table>\\n          <thead>\\n            <tr>\\n              <th rowspan=\\\"2\\\" style=\\\"width: 200px\\\">출역일</th>\\n              <th colspan=\\\"2\\\">원청사</th>\\n              <th colspan=\\\"2\\\">협력사</th>\\n              <th rowspan=\\\"2\\\">합계</th>\\n            </tr>\\n            <tr>\\n              <th>관리자</th>\\n              <th>작업자</th>\\n              <th>관리자</th>\\n              <th>작업자</th>\\n            </tr>\\n          </thead>\\n            <tr class=\\\"button\\\" *ngFor=\\\"let item of res?.rsMap; let i = index\\\" (click)=\\\"detail(item)\\\">\\n              <td>{{ item.work_date }}</td>\\n              <td>{{ item.master_admin }}</td>\\n              <td>{{ item.master_worker }}</td>\\n              <td>{{ item.company_admin }}</td>\\n              <td>{{ item.company_worker }}</td>\\n              <td>{{ item.total_cnt }}</td>\\n            </tr>\\n          <tbody>\\n          </tbody>\\n        </app-table>\\n        <app-pager [totalCount]=\\\"res?.rsObj.row_count\\\" [limitNo]=\\\"form.limit_no\\\" (pagerChange)=\\\"getList($event)\\\"></app-pager>\\n      </app-col>\\n    </app-row>\\n  </app-container>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}