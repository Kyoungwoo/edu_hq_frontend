{"version":3,"sources":["./src/app/page/safety-education/education-history/safety-education-history-list/safety-education-history-list-routing.module.ts","./src/app/page/safety-education/education-history/safety-education-history-list/safety-education-history-list.module.ts","./src/app/page/safety-education/education-history/safety-education-history-list/safety-education-history-list.page.ts","./src/app/page/safety-education/education-history/safety-education-history-list/safety-education-history-list.page.scss","./src/app/page/safety-education/education-history/safety-education-history-list/safety-education-history-list.page.html"],"names":[],"mappings":"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","file":"src_app_page_safety-education_education-history_safety-education-history-list_safety-educatio-c9dd45.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SafetyEducationHistoryListPage } from './safety-education-history-list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SafetyEducationHistoryListPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SafetyEducationHistoryListPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SafetyEducationHistoryListPageRoutingModule } from './safety-education-history-list-routing.module';\n\nimport { SafetyEducationHistoryListPage } from './safety-education-history-list.page';\nimport { ComponentModule } from 'src/app/component/component.module';\nimport { BasicComponentModule } from 'src/app/basic/component/basic.component.module';\nimport { SafetyEducationHistoryDetailPageModule } from '../safety-education-history-detail/safety-education-history-detail.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentModule,\n    BasicComponentModule,\n    SafetyEducationHistoryListPageRoutingModule,\n    SafetyEducationHistoryDetailPageModule\n  ],\n  declarations: [SafetyEducationHistoryListPage]\n})\nexport class SafetyEducationHistoryListPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ModalController, PopoverController } from '@ionic/angular';\nimport { ConnectResult, ConnectService } from 'src/app/basic/service/core/connect.service';\nimport { UserService } from 'src/app/basic/service/core/user.service';\nimport { PeopleViewComponent } from 'src/app/component/modal/people-view/people-view.component';\nimport { SafetyEducationHistoryDetailPage } from '../safety-education-history-detail/safety-education-history-detail.page';\n\n@Component({\n  selector: 'app-safety-education-history-list',\n  templateUrl: './safety-education-history-list.page.html',\n  styleUrls: ['./safety-education-history-list.page.scss'],\n})\nexport class SafetyEducationHistoryListPage implements OnInit {\n\n  form = {\n    company_id: 0, // 업체 ID\n    education_safe_state: '전체', // 양호 필요 기한초과\n    limit_no: 0,// 20개씩\n    project_id: 0, // 현장 ID\n    search_text:'' // 검색어\n  }\n  res:ConnectResult<{\n    index:number,\n    ctgo_safe_job_name:string,\n    ctgo_job_position_id:number,\n    user_name:string,\n    ctgo_occupation_name:string,\n    ctgo_job_position_name:string,\n    project_name:string,\n    ctgo_occupation_id:number,\n    user_id:number,\n    project_id:number,\n    recruitement_state:string,\n    require_state:string, //정기\n    special_state:string, //특별\n    work_contract_type:'일용직' | '상용직',\n    row_count:number,\n    company_name:string,\n    special_edu_state_result:string\n  }>\n\n  permission = {\n    company_id: false\n  }\n  editable = {\n    company_id:false,\n    add: false\n  }\n  constructor(\n    private modal : ModalController,\n    private connect: ConnectService,\n    public user: UserService,\n    private popover: PopoverController\n  ) { }\n\n  async ngOnInit() {\n    await this.projectRolechekc();\n    this.getForm();\n    this.getList();\n  }\n\n  projectRolechekc() {\n    const { user_role , belong_data} = this.user.userData;\n    console.log(\"belong_data.company_id\",belong_data.company_id);\n    if(user_role === 'MASTER_HEAD' ||\n      user_role === 'PARTNER_GENERAL'||\n      user_role === 'PARTNER_HEAD' ||\n      user_role === 'MASTER_GENERAL') {\n        this.editable.company_id = true;\n        this.form.project_id = belong_data.project_id;\n        this.form.company_id = belong_data.company_id;\n      } else if(user_role === 'LH_HEAD') {\n        this.form.project_id = belong_data.project_id;\n        this.editable.add = true;\n      }\n  }\n\n  getForm() {\n    const { user_role , belong_data} = this.user.userData;\n    if(user_role === 'MASTER_HEAD' ||\n      user_role === 'PARTNER_GENERAL'||\n      user_role === 'PARTNER_HEAD' ||\n      user_role === 'MASTER_GENERAL') {\n        this.form.project_id = belong_data.project_id;\n        this.form.company_id = belong_data.company_id;\n      } else if(user_role === 'LH_HEAD') {\n        this.permission.company_id = true;\n        this.form.project_id = belong_data.project_id;\n      }\n  }\n\n  async getList(limit_no = this.form.limit_no) {\n    this.form.limit_no = limit_no;\n    const res = await this.connect.run('/education/state/record/list', this.form, {\n      parse:['safe_job_name']\n    });\n    if(res.rsCode === 0) {\n      this.res = res;\n\n      this.res.rsMap.forEach(async(item, i) => {\n        item.index = res.rsObj.row_count - this.form.limit_no - i; //  - (this.form.limit_no - i);\n        item.ctgo_safe_job_name?.toString();\n      });\n    } else {\n      this.res = null;\n    }\n  }\n\n  async edit(user_id) {\n    const modal = await this.modal.create({\n      component:SafetyEducationHistoryDetailPage,\n      componentProps:{\n        user_id\n      }\n    });\n    modal.present();\n  }\n\n  async userInfo(education_safe_manager_id,ev) {\n    ev.stopPropagation()\n    const popover = await this.popover.create({\n      component:PeopleViewComponent,\n      componentProps:{\n        education_safe_manager_id\n      },\n      cssClass:'education-info',\n      event:ev\n    });\n    popover.present();\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzYWZldHktZWR1Y2F0aW9uLWhpc3RvcnktbGlzdC5wYWdlLnNjc3MifQ== */\";","export default \"<ng-container *mobileHidden>\\n  <app-header-admin></app-header-admin>\\n  <ion-content>\\n    <app-row style=\\\"align-items: flex-start;\\\">\\n      <app-col size=\\\"280px\\\">\\n        <app-table type=\\\"card\\\">\\n          <ion-toolbar slot=\\\"top\\\" color=\\\"white\\\">\\n            <app-row style=\\\"justify-content: space-between;\\\">\\n              <app-col size=\\\"auto\\\"><h5>필터</h5></app-col>\\n              <app-col size=\\\"auto\\\"><app-button fill=\\\"translucent\\\" style=\\\"width: 100px;\\\" (click)=\\\"getList(0)\\\">검색</app-button></app-col>\\n            </app-row>\\n          </ion-toolbar>\\n          <tbody>\\n            <tr>\\n              <td>\\n                <app-select-scene [(ngModel)]=\\\"form.project_id\\\"></app-select-scene>\\n              </td>\\n            </tr>\\n            <tr *ngIf=\\\"user.userData.user_role !== 'PARTNER_GENERAL' && user.userData.user_role !== 'PARTNER_HEAD'\\\">\\n              <td>\\n                <!-- <app-select-contractor [allState]=\\\"editable.add\\\" [project_id]=\\\"form.project_id || 0\\\" [(ngModel)]=\\\"form.company_id\\\" [disabled]=\\\"editable.company_id\\\"></app-select-contractor> -->\\n                <app-select-contractor [project_id]=\\\"form.project_id\\\" [(ngModel)]=\\\"form.company_id\\\" [readonly]=\\\"editable.company_id\\\"></app-select-contractor> \\n                <!-- <app-select-company [project_id]=\\\"form.project_id || 0\\\"\\n                [(ngModel)]=\\\"form.company_id\\\"\\n                [all]=\\\"true\\\"></app-select-company> -->\\n              </td>\\n            </tr>\\n            <tr>\\n              <td>\\n                <app-select label=\\\"교육상태\\\" value=\\\"전체\\\" [(ngModel)]=\\\"form.education_safe_state\\\">\\n                  <app-select-option value=\\\"전체\\\">전체</app-select-option>\\n                  <app-select-option value=\\\"양호\\\">양호</app-select-option>\\n                  <app-select-option value=\\\"필요\\\">필요</app-select-option>\\n                  <app-select-option value=\\\"기한초과\\\">기한초과</app-select-option>\\n                </app-select>\\n              </td>\\n            </tr>\\n            <tr>\\n              <td>\\n                <app-input label=\\\"검색어\\\" [(ngModel)]=\\\"form.search_text\\\" placeholder=\\\"검색어를 입력해 주세요.\\\"></app-input>\\n              </td>\\n            </tr>\\n          </tbody>\\n        </app-table>\\n      </app-col>\\n      <app-col>\\n        <ion-toolbar color=\\\"white\\\">\\n          <ion-buttons slot=\\\"start\\\">\\n            <ion-segment color=\\\"primary\\\" value=\\\"1\\\">\\n              <ion-segment-button [value]=\\\"1\\\">작업자</ion-segment-button>\\n            </ion-segment>\\n          </ion-buttons>\\n          <ion-item-group slot=\\\"end\\\">\\n            <ion-chip outline color=\\\"primary\\\">양호</ion-chip>\\n            <ion-chip outline color=\\\"warning\\\">필요</ion-chip>\\n            <ion-chip outline color=\\\"danger\\\">기한초과</ion-chip>\\n          </ion-item-group>\\n        </ion-toolbar>\\n        <ion-toolbar color=\\\"white\\\">\\n          <h5>근로자 교육 이력 (총 {{ res?.rsObj?.row_count || 0}}건)</h5>\\n        </ion-toolbar>\\n        <app-table>\\n          <thead>\\n            <tr>\\n              <th style=\\\"width: 48px;\\\">No</th>\\n              <th>업체명</th>\\n              <th>성명</th>\\n              <th>직위</th>\\n              <th>직종</th>\\n              <th>안전직무</th>\\n              <th>계약유형</th>\\n              <th>채용시</th>\\n              <th>정기</th>\\n              <th>특별</th>\\n              <th>출역상태</th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            <tr class=\\\"button\\\" *ngFor=\\\"let item of res?.rsMap\\\" (click)=\\\"edit(item.user_id)\\\">\\n              <td>{{ item.index }}</td>\\n              <td>{{ item.company_name }}</td>\\n              <td (click)=\\\"userInfo(item.user_id,$event)\\\">{{ item.user_name}}</td>\\n              <td>{{ item.ctgo_job_position_name }}</td>\\n              <td>{{ item.ctgo_occupation_name }}</td>\\n              <td>{{ item.ctgo_safe_job_name}}</td>\\n              <td>{{ item.work_contract_type }}</td>\\n              <td>\\n                <ion-chip *ngIf=\\\"item.recruitement_state === '양호'\\\" outline color=\\\"primary\\\">양호</ion-chip>\\n                <ion-chip *ngIf=\\\"item.recruitement_state === '필요'\\\" outline color=\\\"warning\\\">필요</ion-chip>\\n                <ion-chip *ngIf=\\\"item.recruitement_state === '기한초과'\\\" outline color=\\\"danger\\\">기한초과</ion-chip>\\n                <span *ngIf=\\\"item.recruitement_state === '-'\\\">-</span>\\n              </td>\\n              <td>\\n                <ion-chip *ngIf=\\\"item.require_state === '양호'\\\" outline color=\\\"primary\\\">양호</ion-chip>\\n                <ion-chip *ngIf=\\\"item.require_state === '필요'\\\" outline color=\\\"warning\\\">필요</ion-chip>\\n                <ion-chip *ngIf=\\\"item.require_state === '기한초과'\\\" outline color=\\\"danger\\\">기한초과</ion-chip>\\n                <span *ngIf=\\\"item.require_state === '-'\\\">-</span>\\n              </td>\\n              <td>\\n                <ion-chip *ngIf=\\\"item.special_state === '양호'\\\" outline color=\\\"primary\\\">양호</ion-chip>\\n                <ion-chip *ngIf=\\\"item.special_state === '필요'\\\" outline color=\\\"warning\\\">필요</ion-chip>\\n                <ion-chip *ngIf=\\\"item.special_state === '기한초과'\\\" outline color=\\\"danger\\\">기한초과</ion-chip>\\n                <span *ngIf=\\\"item.special_state === '-'\\\">-</span>\\n              </td>\\n              <td>출역중</td>\\n            </tr>\\n            <tr>\\n            </tr>\\n          </tbody>\\n        </app-table>\\n        <!-- <app-pager [totalCount]=\\\"res?.rsObj?.row_count\\\" [limitNo]=\\\"form.limit_no\\\" (pagerChange)=\\\"getList($event)\\\"></app-pager> -->\\n      </app-col>\\n    </app-row>\\n  </ion-content>\\n</ng-container>\\n\";"],"sourceRoot":"webpack:///"}