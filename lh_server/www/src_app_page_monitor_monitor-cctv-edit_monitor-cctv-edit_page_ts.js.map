{"version":3,"sources":["./src/app/page/monitor/monitor-cctv-edit/monitor-cctv-edit.page.ts","./src/app/page/monitor/monitor-cctv-edit/monitor-cctv-edit.page.scss","./src/app/page/monitor/monitor-cctv-edit/monitor-cctv-edit.page.html"],"names":[],"mappings":"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","file":"src_app_page_monitor_monitor-cctv-edit_monitor-cctv-edit_page_ts.js","sourcesContent":["import { CCTVInfo } from './../monitor-cctv-list/monitor-cctv-list.page';\nimport { AlertService } from './../../../basic/service/ionic/alert.service';\nimport { ModalController } from '@ionic/angular';\nimport { ConnectService, ConnectResult } from './../../../basic/service/core/connect.service';\nimport { UserService } from './../../../basic/service/core/user.service';\nimport { ToastService } from './../../../basic/service/ionic/toast.service';\nimport { Component, Input, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-monitor-cctv-edit',\n  templateUrl: './monitor-cctv-edit.page.html',\n  styleUrls: ['./monitor-cctv-edit.page.scss'],\n})\nexport class MonitorCctvEditPage implements OnInit {\n  @Input() cctv_id:number = null;\n  @Input() type:string = '';\n  @Input() item:any;\n\n  form = {\n    cctv_id: 0,\n    cctv_alias: '',\n    cctv_area_name: '',\n    cctv_channel_no: '',\n    cctv_ip: '',\n    cctv_nvr_id: '',\n    cctv_nvr_password: '',\n    cctv_port: '',\n    cctv_use_state: 0,\n    master_company_id: 0,\n    master_company_name: '',\n    project_id: 0,\n    project_name: ''\n  }\n\n  permission = {\n    edit_btn: false,\n    input_disabled: false\n  }\n\n  constructor(\n    private alert: AlertService,\n    private _modal: ModalController,\n    private connect: ConnectService,\n    public user: UserService,\n    private toast: ToastService\n  ) { }\n\n  ngOnInit() {\n    if(this.cctv_id){\n      this.get();\n    } else {\n      this.form.project_id = this.item.project_id;\n      this.form.master_company_id = this.item.master_company_id;\n    }\n\n    if(this.type === 'update') this.permission.edit_btn = true;\n    else this.permission.input_disabled = true;\n  }\n\n  /**\n   * @function get(): CCTV상세정보를 가져옵니다.\n   */\n   async get() {\n    const res = await this.connect.run('/cctv/detail', {cctv_id: this.cctv_id});\n    if(res.rsCode === 0 ) {\n      this.form = res.rsObj;\n    }\n    else if (res.rsCode === 1008) {\n      // this.res = null;\n    }\n    else {\n      this.toast.present({ color: 'warning', message: res.rsMsg });\n    }\n  }\n\n  /**\n   * @function save(): CCTV정보등록 OR 수정\n   */\n  async save(){\n    let msg:string = this.validation();\n    if(msg) return this.toast.present({message: msg, color: 'warning'});\n\n    const alert = await this.alert.present({\n      message:'저장 하시겠습니까?',\n      buttons:[\n        {text:'아니요'},\n        {text:'예',\n          handler:async() => {\n            // console.log(this.form);\n            const res = await this.connect.run(`/cctv/${this.type}`, this.form);\n            if(res.rsCode === 0 ) {\n              this._modal.dismiss(true);\n            }\n            else if (res.rsCode === 1008) {\n              // this.res = null;\n            }\n            else {\n              this.toast.present({ color: 'warning', message: res.rsMsg });\n            }\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n\n  /**\n   * @function delete(): CCTV정보등록 OR 삭제\n   */\n   async delete(){\n    const alert = await this.alert.present({\n      message:'삭제 하시겠습니까?',\n      buttons:[\n        {text:'아니요'},\n        {text:'예',\n          handler:async() => {\n            const res = await this.connect.run('/cctv/delete', {cctv_ids: [this.cctv_id]});\n            if(res.rsCode === 0 ) {\n              this._modal.dismiss(true);\n            }\n            else if (res.rsCode === 1008) {\n              // this.res = null;\n            }\n            else {\n              this.toast.present({ color: 'warning', message: res.rsMsg });\n            }\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n\n  /**\n   * @function validation(): CCTV상세정보 유효성검사\n   */\n  validation(){\n    if(!this.form.project_id) return '현장을 선택해주세요.';\n    if(!this.form.master_company_id) return '원청사를 선택해주세요.';\n    if(!this.form.cctv_area_name) return '설치장소명을 입력해주세요.';\n    if(!this.form.cctv_ip) return 'CCTV IP를 입력해주세요.';\n    if(!this.form.cctv_alias) return 'Alias를 입력해주세요.';\n    if(!this.form.cctv_port) return 'Port를 입력해주세요.';\n    if(!this.form.cctv_channel_no) return 'Channel No.를 입력해주세요.';\n    if(!this.form.cctv_nvr_id) return 'NVR ID를 입력해주세요.';\n    if(!this.form.cctv_nvr_password) return 'NVR PW를 입력해주세요.';\n    return null;\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJtb25pdG9yLWNjdHYtZWRpdC5wYWdlLnNjc3MifQ== */\";","export default \"<ion-header>\\n  <ion-toolbar color=\\\"white\\\">\\n    <ion-title>CCTV 상세보기</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-buttons slot=\\\"end\\\">\\n        <app-dismiss-button></app-dismiss-button>\\n      </ion-buttons>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <app-row mobileBreak>\\n    <app-col>\\n      <app-select-scene [required]=\\\"true\\\" label=\\\"현장명\\\" [(ngModel)]=\\\"form.project_id\\\" [disabled]=\\\"!permission.input_disabled\\\"></app-select-scene>\\n    </app-col>\\n    <app-col>\\n      <app-select-contractor *ngIf=\\\"!cctv_id\\\" [required]=\\\"true\\\" label=\\\"원청사명\\\" [project_id]=\\\"form.project_id\\\" [(ngModel)]=\\\"form.master_company_id\\\" [disabled]=\\\"true\\\"></app-select-contractor>\\n      <app-input *ngIf=\\\"cctv_id\\\" [required]=\\\"true\\\" label=\\\"원청사명\\\" [(ngModel)]=\\\"form.master_company_name\\\" [disabled]=\\\"true\\\"></app-input>\\n    </app-col>\\n  </app-row>\\n\\n  <app-row mobileBreak>\\n    <app-col>\\n      <app-input [required]=\\\"true\\\" label=\\\"설치장소명\\\" [(ngModel)]=\\\"form.cctv_area_name\\\" [disabled]=\\\"!permission.input_disabled\\\"></app-input>\\n    </app-col>\\n    <app-col>\\n      <app-input [required]=\\\"true\\\" label=\\\"CCTV IP\\\" [(ngModel)]=\\\"form.cctv_ip\\\" [disabled]=\\\"!permission.input_disabled\\\"></app-input>\\n    </app-col>\\n  </app-row>\\n\\n  <app-row mobileBreak>\\n    <app-col>\\n      <app-input [required]=\\\"true\\\" label=\\\"Port\\\" [(ngModel)]=\\\"form.cctv_port\\\" [disabled]=\\\"!permission.input_disabled\\\"></app-input>\\n    </app-col>\\n    <app-col>\\n      <app-input [required]=\\\"true\\\" label=\\\"Channel No.\\\" [(ngModel)]=\\\"form.cctv_channel_no\\\" [disabled]=\\\"!permission.input_disabled\\\"></app-input>\\n    </app-col>\\n  </app-row>\\n\\n  <app-row mobileBreak>\\n    <app-col>\\n      <app-input [required]=\\\"true\\\" label=\\\"NVR ID\\\" [(ngModel)]=\\\"form.cctv_nvr_id\\\" [disabled]=\\\"!permission.input_disabled\\\"></app-input>\\n    </app-col>\\n    <app-col>\\n      <app-input [required]=\\\"true\\\" label=\\\"NVR PW\\\" [(ngModel)]=\\\"form.cctv_nvr_password\\\" [disabled]=\\\"!permission.input_disabled\\\"></app-input>\\n    </app-col>\\n  </app-row>\\n\\n  <app-row mobileBreak>\\n    <app-col>\\n      <app-input [required]=\\\"true\\\" label=\\\"Alias\\\" [(ngModel)]=\\\"form.cctv_alias\\\" [disabled]=\\\"!permission.input_disabled\\\"></app-input>\\n    </app-col>\\n  </app-row>\\n</ion-content>\\n<app-button-footer *ngIf=\\\"type === 'update'\\\">\\n  <app-button fill=\\\"translucent\\\" *ngIf=\\\"!permission.input_disabled\\\" (click)=\\\"this.permission.input_disabled = true\\\">수정</app-button>\\n  <app-button fill=\\\"translucent\\\" (click)=\\\"delete()\\\" color=\\\"danger\\\">삭제</app-button>\\n  <app-button fill=\\\"translucent\\\" *ngIf=\\\"permission.input_disabled\\\" (click)=\\\"save()\\\">저장</app-button>\\n</app-button-footer>\\n<app-button-footer *ngIf=\\\"type === 'insert'\\\">\\n  <app-button name=\\\"submit\\\" (click)=\\\"save()\\\">저장</app-button>\\n</app-button-footer>\";"],"sourceRoot":"webpack:///"}