{"version":3,"sources":["./src/app/page/my-page/change-password/change-password.page.ts","./src/app/page/my-page/change-password/change-password.page.scss","./src/app/page/my-page/change-password/change-password.page.html"],"names":[],"mappings":"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","file":"src_app_page_my-page_change-password_change-password_page_ts.js","sourcesContent":["import { ChangeDetectorRef, Component, ElementRef, OnInit } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { ConnectService, Validator } from 'src/app/basic/service/core/connect.service';\nimport { LanguagePackService } from 'src/app/basic/service/core/language-pack.service';\nimport { AlertService } from 'src/app/basic/service/ionic/alert.service';\nimport { NavService } from 'src/app/basic/service/ionic/nav.service';\nimport { ToastService } from 'src/app/basic/service/ionic/toast.service';\nimport { PromiseService } from 'src/app/basic/service/util/promise.service';\nimport { environment } from 'src/environments/environment';\n\nexport class ChangePasswordForm {\n  account_token:string = null;\n  new_account_token:string = null;\n  new_account_token_conform:string = null;\n}\n\n@Component({\n  selector: 'app-change-password',\n  templateUrl: './change-password.page.html',\n  styleUrls: ['./change-password.page.scss'],\n})\nexport class ChangePasswordPage implements OnInit {\n\n  form = new ChangePasswordForm();\n  validator = new Validator(new ChangePasswordForm()).validator;\n\n  constructor(\n    private el: ElementRef<HTMLElement>,\n    private alert: AlertService,\n    private _modal: ModalController,\n    private connect: ConnectService,\n    private nav: NavService,\n    private promise: PromiseService,\n    private toast: ToastService,\n    private changeDetector: ChangeDetectorRef,\n    public languagePack: LanguagePackService\n  ) { }\n\n  ngOnInit() {\n    this.test();\n  }\n\n  private async test() {\n    if(!environment.test.core.test) return;\n\n    const el = this.el.nativeElement;\n    await this.promise.wait();\n    \n    // 데이터 입력\n    el.querySelector('[name=account_token]').dispatchEvent(new CustomEvent('setValue', { detail: 'qwer1234' }));\n    el.querySelector('[name=new_account_token]').dispatchEvent(new CustomEvent('setValue', { detail: 'qwer1234' }));\n    el.querySelector('[name=new_account_token_conform]').dispatchEvent(new CustomEvent('setValue', { detail: 'qwer1234' }));\n    await this.promise.wait();\n\n    el.querySelector('[name=button_submit]').dispatchEvent(new Event('click'));\n    await this.promise.wait(800);\n    \n    document.querySelector('.alert-button').dispatchEvent(new Event('click'));\n  }\n\n  dismiss() {\n    this._modal.dismiss();\n  }\n\n  public async checkPass() {\n    const { new_account_token } = this.form;\n    if(!new_account_token) return this.validator.new_account_token = null;\n    if(new_account_token?.length < 4) return this.validator.new_account_token = { valid: false, message: '비밀번호를 4자이상 입력해주세요.' };\n    const res = await this.connect.run('/forSignUp/check/pass', { account_token: new_account_token });\n    this.validator.new_account_token = { valid: res.rsCode === 0, message: res.rsMsg };\n  }\n  public checkPassConfirm() {\n    const { new_account_token, new_account_token_conform } = this.form;\n    if(new_account_token !== new_account_token_conform) return this.validator.new_account_token_conform = { valid: false, message: '비밀번호와 비밀번호 확인이 다릅니다.' };\n    else return this.validator.new_account_token_conform = { valid: true };\n  }\n\n  /** submit */\n  async submit() {\n    if(!this.valid()) return;\n\n    const res = await this.connect.run('/mypage/account_token/update', this.form, {\n      loading: true\n    });\n    if(res.rsCode === 0) {\n      this._modal.dismiss();\n      this.nav.navigateRoot('/login', { force: true, animated: true });\n      this.alert.present({\n        img: 'assets/basic/img/check-circle-primary.svg',\n        header: '비밀번호가 변경되었습니다.',\n        message: '재 로그인 해주세요.',\n        backdropDismiss: false,\n        buttons: [\n          { text: '확인' }\n        ]\n      });\n    } else {\n      this.toast.present({ color: 'warning', message: res.rsMsg });\n    }\n  }\n\n  private valid():boolean {\n    if(!this.form.account_token) this.validator.account_token = { message: '기존 비밀번호를 입력해주세요.', valid: false };\n    else this.validator.account_token = { valid: true };\n\n    if(!this.form.new_account_token) this.validator.new_account_token = { message: '새 비밀번호를 입력해주세요.', valid: false };\n    else if(this.validator.new_account_token?.valid) this.validator.new_account_token = { valid: true };\n\n    if(!this.form.new_account_token_conform) this.validator.new_account_token_conform = { message: '새 비밀번호 확인을 입력해주세요.', valid: false };\n    else if(this.validator.new_account_token_conform?.valid) this.validator.new_account_token_conform = { valid: true };\n\n    for(let key in this.validator) {\n      if(!this.validator[key]?.valid) return false;\n    }\n    return true;\n  }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjaGFuZ2UtcGFzc3dvcmQucGFnZS5zY3NzIn0= */\";","export default \"<ion-header>\\n  <ion-toolbar color=\\\"white\\\">\\n    <ion-title>{{ languagePack.getText('비밀번호 변경하기') }}</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <app-dismiss-button></app-dismiss-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <h4>{{ languagePack.getText('비밀번호를 변경해주세요.') }}</h4>\\n  \\n  <app-input name=\\\"account_token\\\" [label]=\\\"languagePack.getText('비밀번호')\\\" type=\\\"password\\\"\\n  [placeholder]=\\\"languagePack.getText('영문,숫자, 조합(6~20자)')\\\"\\n  [color]=\\\"validator.account_token?.valid === false && 'warning'\\\"\\n  [(ngModel)]=\\\"form.account_token\\\" [required]=\\\"true\\\"></app-input>\\n  <app-input-caption *ngIf=\\\"validator.account_token?.valid === false\\\" color=\\\"warning\\\">{{ validator.account_token?.message }}</app-input-caption>\\n\\n  <app-input name=\\\"new_account_token\\\" [label]=\\\"languagePack.getText('새 비밀번호')\\\" type=\\\"password\\\"\\n  [placeholder]=\\\"languagePack.getText('영문,숫자, 조합(6~20자)')\\\"\\n  [color]=\\\"validator.new_account_token?.valid === false && 'warning'\\\"\\n  [(ngModel)]=\\\"form.new_account_token\\\" (delayKeyup)=\\\"checkPass()\\\" [required]=\\\"true\\\"></app-input>\\n  <app-input-caption *ngIf=\\\"validator.new_account_token?.valid === false\\\" color=\\\"warning\\\">{{ validator.new_account_token?.message }}</app-input-caption>\\n  <!-- {{ languagePack.getText(languagePack.getText('새 비밀번호 확인')) }} -->\\n  <!-- \\\"languagePack.getText('새 비밀번호 확인')\\\" -->\\n  <app-input name=\\\"new_account_token_conform\\\" label=\\\"새 비밀번호 확인\\\" \\n  [placeholder]=\\\"languagePack.getText('Re-enter your password.')\\\" type=\\\"password\\\"\\n  [color]=\\\"validator.new_account_token_conform?.valid === false && 'warning'\\\"\\n  [(ngModel)]=\\\"form.new_account_token_conform\\\" (delayKeyup)=\\\"checkPassConfirm()\\\" [required]=\\\"true\\\"></app-input>\\n  <app-input-caption *ngIf=\\\"validator.new_account_token_conform?.valid === false\\\" color=\\\"warning\\\">{{ validator.new_account_token_conform?.message }}</app-input-caption>\\n\\n</ion-content>\\n\\n<app-button-footer>\\n  <app-button (click)=\\\"dismiss()\\\">{{ languagePack.getText('취소') }}</app-button>\\n  <app-button name=\\\"button_submit\\\" (click)=\\\"submit()\\\">{{ languagePack.getText('비밀번호 변경하기') }}</app-button>\\n</app-button-footer>\";"],"sourceRoot":"webpack:///"}