{"version":3,"sources":["./src/app/page/project-management/partner-management/partner-list/partner-list-routing.module.ts","./src/app/page/project-management/partner-management/partner-list/partner-list.module.ts","./src/app/page/project-management/partner-management/partner-list/partner-list.page.ts","./src/app/page/project-management/partner-management/partner-list/partner-list.page.scss","./src/app/page/project-management/partner-management/partner-list/partner-list.page.html"],"names":[],"mappings":"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","file":"src_app_page_project-management_partner-management_partner-list_partner-list_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PartnerListPage } from './partner-list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PartnerListPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PartnerListPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PartnerListPageRoutingModule } from './partner-list-routing.module';\n\nimport { PartnerListPage } from './partner-list.page';\nimport { ComponentModule } from 'src/app/component/component.module';\nimport { PartnerEditPageModule } from '../partner-edit/partner-edit.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentModule,\n    PartnerListPageRoutingModule,\n    PartnerEditPageModule\n  ],\n  declarations: [PartnerListPage]\n})\nexport class PartnerListPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { ConnectResult, ConnectService } from 'src/app/basic/service/core/connect.service';\nimport { UserService } from 'src/app/basic/service/core/user.service';\nimport { ToastService } from 'src/app/basic/service/ionic/toast.service';\nimport { PartnerEditPage } from '../partner-edit/partner-edit.page';\n\n@Component({\n  selector: 'app-partner-list',\n  templateUrl: './partner-list.page.html',\n  styleUrls: ['./partner-list.page.scss'],\n})\nexport class PartnerListPage implements OnInit {\n\n  form = {\n    project_id: (this.user.userData.user_type === 'LH' || this.user.userData.user_type === 'SUPER') ? 0 : this.user.userData.belong_data.project_id,\n    master_company_id: this.user.userData.belong_data.master_company_id,\n    search_text: '',\n    limit_no: 0\n  }\n\n  res:ConnectResult <{\n    company_phone: string,\n    create_user_id: number,\n    company_id: number,\n    create_user_name: string,\n    project_id: number,\n    business_register_no: string,\n    company_name: string,\n    ctgo_construction_name: string,\n    company_ceo: string,\n    project_name: string,\n    master_company_name: string,\n    update_date: string,\n    row_count: number,\n    index: number\n  }>\n\n  permission = {\n    edit: false\n  }\n\n  constructor(\n    private modal: ModalController,\n    private connect: ConnectService,\n    public user: UserService,\n    private toast: ToastService\n  ) { }\n\n  ngOnInit() {\n\n    this.getPromission();\n    this.getForm();\n    this.getList();\n  }\n\n  getPromission() {\n    console.log(\"this.form.master_company_id\",this.form.master_company_id);\n    const { user_role, belong_data } = this.user.userData;\n    if(user_role === 'MASTER_HEAD' && belong_data.company_contract_type === '원청사') this.permission.edit = true;\n  }\n  getForm() {\n    const { user_type, belong_data } = this.user.userData;\n    if(user_type === 'LH') {\n      this.form.master_company_id = 0;\n    } else {\n      this.form.master_company_id = belong_data.master_company_id;\n    }\n  }\n\n  async getList(limit_no = this.form.limit_no) {\n    this.form.limit_no = limit_no;\n    const res = await this.connect.run('/project/company/partner/list', this.form, { loading: true });\n    if(res.rsCode === 0 ) {\n      this.res = res;\n      this.res.rsMap.map((item, i) => {\n        item.index = res.rsObj.row_count - this.form.limit_no - i;\n      });\n    }\n    else if (res.rsCode === 1008) {\n      this.res = null;\n    }\n    else {\n      this.toast.present({ color: 'warning', message: res.rsMsg });\n    }\n  }\n\n  async edit(item?) {\n    console.log('item - ',item ? 1: 2);\n    const modal = await this.modal.create({\n      component:PartnerEditPage,\n      componentProps:{\n        company_id: item?.company_id || 0,\n        project_id: item ? (item.project_id ? item.project_id : this.form.project_id) : this.form.project_id,\n        master_company_id: item ? (item.master_company_id ? item.master_company_id : this.form.master_company_id) : this.form.master_company_id\n      }\n    });\n    modal.present();\n    const { data } = await modal.onDidDismiss();\n    if(data) {\n      this.getList();\n    }\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwYXJ0bmVyLWxpc3QucGFnZS5zY3NzIn0= */\";","export default \"<app-header-admin></app-header-admin>\\n\\n<ion-content style=\\\"--padding-top:15px\\\">\\n  <app-row style=\\\"align-items: flex-start;\\\">\\n    <app-col size=\\\"280px\\\">\\n      <app-table type=\\\"card\\\">\\n        <ion-toolbar slot=\\\"top\\\" color=\\\"white\\\">\\n          <app-row style=\\\"justify-content: space-between;\\\">\\n            <app-col size=\\\"auto\\\"><h5>필터</h5></app-col>\\n            <app-col size=\\\"auto\\\">\\n              <app-button fill=\\\"translucent\\\" style=\\\"width: 100px;\\\" (click)=\\\"getList(0)\\\">검색</app-button>\\n            </app-col>\\n          </app-row>\\n        </ion-toolbar>\\n        <tbody>\\n          <!-- <tr>\\n            <td>\\n              <app-select-scene [(ngModel)]=\\\"form.project_id\\\"></app-select-scene>\\n            </td>\\n          </tr> -->\\n          <tr>\\n            <td>\\n              <app-select-contractor [only_state]=\\\"true\\\" [project_id]=\\\"form.project_id\\\" [(ngModel)]=\\\"form.master_company_id\\\" [allState]=\\\"true\\\"></app-select-contractor>\\n            </td>\\n          </tr>\\n          <tr>\\n            <td>\\n              <app-input label=\\\"검색어\\\" [(ngModel)]=\\\"form.search_text\\\" placeholder=\\\"검색어를 입력해 주세요.\\\"></app-input>\\n            </td>\\n          </tr>\\n        </tbody>\\n      </app-table>\\n    </app-col>\\n    <app-col>\\n      <ion-toolbar color=\\\"white\\\" *ngIf=\\\"permission.edit\\\">\\n        <ion-buttons slot=\\\"start\\\">\\n          <app-col>\\n            <app-button fill=\\\"translucent\\\" (click)=\\\"edit()\\\">신규 등록</app-button>\\n          </app-col>\\n        </ion-buttons>\\n      </ion-toolbar>        \\n      <ion-toolbar color=\\\"white\\\">\\n        <h5>협력사 목록 (총 {{ res?.rsObj?.row_count || 0}}건)</h5>\\n      </ion-toolbar>\\n      <app-table>\\n        <thead>\\n          <tr>\\n            <th style=\\\"width: 48px;\\\">No</th>\\n            <!-- <th>현장명</th> -->\\n            <th>원청사명</th>\\n            <th>협력사명</th>\\n            <th>사업자등록번호</th>\\n            <th>대표자</th>\\n            <!-- <th>공종</th> -->\\n            <!-- <th>전화번호</th> -->\\n            <th>최근 업데이트</th>\\n            <th>작성자</th>\\n          </tr>\\n        </thead>\\n          <tr class=\\\"button\\\" *ngFor=\\\"let item of res?.rsMap let i = index\\\" (click)=\\\"edit(item)\\\">\\n            <td>{{ item.index }}</td>\\n            <!-- <td>{{ item.project_name }}</td> -->\\n            <td>{{ item.master_company_name }}</td>\\n            <td>{{ item.company_name }}</td>\\n            <td>{{ item.business_register_no }}</td>\\n            <td>{{ item.company_ceo}}</td>\\n            <!-- <td>{{ item.ctgo_construction_name }}</td>\\n            <td>{{ item.company_phone }}</td> -->\\n            <td>{{ item.update_date }}</td>\\n            <td>{{ item.create_user_name}}</td>\\n          </tr>\\n        <tbody>\\n        </tbody>\\n      </app-table>\\n      <app-pager [totalCount]=\\\"res?.rsObj.row_count\\\" [limitNo]=\\\"form.limit_no\\\" (pagerChange)=\\\"getList($event)\\\"></app-pager>\\n    </app-col>\\n  </app-row>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}