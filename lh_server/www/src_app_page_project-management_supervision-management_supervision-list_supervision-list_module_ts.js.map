{"version":3,"sources":["./src/app/page/project-management/supervision-management/supervision-list/supervision-list-routing.module.ts","./src/app/page/project-management/supervision-management/supervision-list/supervision-list.module.ts","./src/app/page/project-management/supervision-management/supervision-list/supervision-list.page.ts","./src/app/page/project-management/supervision-management/supervision-list/supervision-list.page.scss","./src/app/page/project-management/supervision-management/supervision-list/supervision-list.page.html"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACc;AAEO;AAE9D,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,uEAAmB;KAC/B;CACF,CAAC;IAMW,gCAAgC,SAAhC,gCAAgC;CAAG;AAAnC,gCAAgC;IAJ5C,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,gCAAgC,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;AChBJ;AACM;AACF;AAEA;AAEwC;AAEvB;AACO;AACiB;AACE;IAc3E,yBAAyB,SAAzB,yBAAyB;CAAG;AAA5B,yBAAyB;IAZrC,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,+EAAe;YACf,gGAAoB;YACpB,8FAAgC;YAChC,gGAAyB;SAC1B;QACD,YAAY,EAAE,CAAC,uEAAmB,CAAC;KACpC,CAAC;GACW,yBAAyB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzBY;AACD;AAC0C;AACrB;AACG;AACO;IAOnE,mBAAmB,SAAnB,mBAAmB;IAoD9B,YACU,KAAsB,EACtB,OAAuB,EACxB,IAAiB,EAChB,KAAmB;QAHnB,UAAK,GAAL,KAAK,CAAiB;QACtB,YAAO,GAAP,OAAO,CAAgB;QACxB,SAAI,GAAJ,IAAI,CAAa;QAChB,UAAK,GAAL,KAAK,CAAc;QAtD7B,SAAI,GAAG;YACL,UAAU,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,KAAK,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,KAAK,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,UAAU;YAC/I,qBAAqB,EAAE,KAAK;YAC5B,mHAAmH;YACnH,mHAAmH;YACnH,QAAQ,EAAE,CAAC;YACX,kBAAkB,EAAE,EAAE;YACtB,WAAW,EAAE,EAAE;SAChB;QAED,sBAAiB,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,iBAAiB,CAAC;QAsCrE,kBAAa,GAAY,IAAI,CAAC;IAO1B,CAAC;IAEL,QAAQ;QACN,IAAI,CAAC,YAAY,GAAG;YAClB,WAAW,EAAE,IAAI;YACjB,MAAM,EAAE,IAAI;YACZ,KAAK,EAAE,IAAI;YACX,KAAK,EAAE,EAAE;YACT,KAAK,EAAE,EAAE;YACT,QAAQ,EAAE,EAAE;SACb;QACD,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QAChB,0BAA0B;QAC1B,0BAA0B;IAC5B,CAAC;IAEK,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ;;YACzC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;YAE9B,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,+BAA+B,EAAE,IAAI,CAAC,IAAI,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;YAClG,IAAG,GAAG,CAAC,MAAM,KAAK,CAAC,EAAG;gBACpB,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;gBACf,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE;oBAC7B,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAC5D,CAAC,CAAC,CAAC;aACJ;iBACI,IAAI,GAAG,CAAC,MAAM,KAAK,IAAI,EAAE;gBAC5B,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;aACjB;iBACI;gBACH,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC;aAC9D;QACH,CAAC;KAAA;IAGK,IAAI,CAAC,IAAK;;YACd,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;gBACpC,SAAS,EAAE,wFAAmB;gBAC9B,cAAc,EAAC;oBACb,UAAU,EAAE,KAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,UAAU,KAAI,CAAC;oBACjC,UAAU,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU;iBACrG;aACF,CAAC,CAAC;YACH,KAAK,CAAC,OAAO,EAAE,CAAC;YAChB,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,KAAK,CAAC,YAAY,EAAE,CAAC;YAC5C,IAAG,IAAI;gBAAE,IAAI,CAAC,OAAO,EAAE,CAAC;QAC1B,CAAC;KAAA;CA4BF;;YA9IQ,2DAAe;YACA,sFAAc;YAC7B,gFAAW;YACX,mFAAY;;AAQR,mBAAmB;IAL/B,wDAAS,CAAC;QACT,QAAQ,EAAE,sBAAsB;QAChC,qFAA2C;;KAE5C,CAAC;GACW,mBAAmB,CAmI/B;AAnI+B;;;;;;;;;;;;;;;;ACZhC,iEAAe,8CAA8C,+HAA+H,E;;;;;;;;;;;;;;;ACA5L,iEAAe,0GAA0G,0LAA0L,8KAA8K,seAAse,wBAAwB,mbAAmb,wBAAwB,4uBAA4uB,4BAA4B,oKAAoK,idAAid,cAAc,kCAAkC,yBAAyB,6BAA6B,yBAAyB,6BAA6B,qBAAqB,iCAAiC,qBAAqB,6BAA6B,6BAA6B,6BAA6B,oBAAoB,6BAA6B,oBAAoB,6BAA6B,yBAAyB,kSAAkS,E","file":"src_app_page_project-management_supervision-management_supervision-list_supervision-list_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SupervisionListPage } from './supervision-list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SupervisionListPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SupervisionListPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SupervisionListPageRoutingModule } from './supervision-list-routing.module';\n\nimport { SupervisionListPage } from './supervision-list.page';\nimport { ComponentModule } from 'src/app/component/component.module';\nimport { BasicComponentModule } from 'src/app/basic/component/basic.component.module';\nimport { SupervisionEditPageModule } from '../supervision-edit/supervision-edit.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentModule,\n    BasicComponentModule,\n    SupervisionListPageRoutingModule,\n    SupervisionEditPageModule\n  ],\n  declarations: [SupervisionListPage]\n})\nexport class SupervisionListPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { ConnectResult, ConnectService } from 'src/app/basic/service/core/connect.service';\nimport { UserService } from 'src/app/basic/service/core/user.service';\nimport { ToastService } from 'src/app/basic/service/ionic/toast.service';\nimport { SupervisionEditPage } from '../supervision-edit/supervision-edit.page';\n\n@Component({\n  selector: 'app-supervision-list',\n  templateUrl: './supervision-list.page.html',\n  styleUrls: ['./supervision-list.page.scss'],\n})\nexport class SupervisionListPage implements OnInit {\n\n  form = {\n    project_id: (this.user.userData.user_type === 'LH' || this.user.userData.user_type === 'SUPER') ? 0 : this.user.userData.belong_data.project_id,\n    company_contract_type: '감리사',\n    // hq_regional_id: this.user.userData.user_type === 'LH' ? 0 : (this.user.userData.belong_data.hq_regional_id | 0),\n    // hq_business_id: this.user.userData.user_type === 'LH' ? 0 : (this.user.userData.belong_data.hq_business_id | 0),\n    limit_no: 0,\n    master_company_ids: [],\n    search_text: ''\n  }\n\n  master_company_id = this.user.userData.belong_data.master_company_id;\n\n  res: ConnectResult <{\n    contract_end_date: string, // ~ 공사기간\n    hq_business_name: string, // 사업본부\n    project_id: number, // 현장 ID\n    hq_regional_id: number, // 지역본부 ID\n    hq_business_id: number, // 사업본부 ID\n    project_code: string, // 현장 코드\n    hq_regional_name: string, // 지역본부\n    project_name: string, // 현장명\n    // contract_start_date: string, // 공사기간 ~\n    // project_use_state: number, // 1 사용, 0 미사용\n    update_date: string, // 최근 업데이트\n    business_register_no: string,\n    company_ceo: string,\n    company_id: number,\n    company_name: string,\n    create_user_id: number,\n    create_user_name: string,\n    row_count: number,\n    index: number\n  }>\n\n  ctgoRegional: ConnectResult<{\n    hq_regional_name: string,\n    hq_regional_entire_state: number,\n    hq_regional_code: string,\n    hq_regional_id: number\n  }>\n\n  ctgoBusiness: ConnectResult<{\n    hq_business_name: string,\n    hq_business_entire_state: number,\n    hq_regional_id: number,\n    hq_business_code: string,\n    hq_business_id: number\n  }>\n  businessState: boolean = true;\n\n  constructor(\n    private modal: ModalController,\n    private connect: ConnectService,\n    public user: UserService,\n    private toast: ToastService\n  ) { }\n\n  ngOnInit() {\n    this.ctgoBusiness = {\n      errorStatus: null,\n      rsCode: null,\n      rsObj: null,\n      rsMsg: '',\n      rsMap: [],\n      rqMethod: ''\n    }\n    this.getList(0);\n    // this.getCtgoBusiness();\n    // this.getCtgoRegional();\n  }\n\n  async getList(limit_no = this.form.limit_no) {\n    this.form.limit_no = limit_no;\n\n    const res = await this.connect.run('/project/company/masters/list', this.form, { loading: true });\n    if(res.rsCode === 0 ) {\n      this.res = res;\n      this.res.rsMap.map((item, i) => {\n        item.index = res.rsObj.row_count - this.form.limit_no - i;\n      });\n    }\n    else if (res.rsCode === 1008) {\n      this.res = null;\n    }\n    else {\n      this.toast.present({ color: 'warning', message: res.rsMsg });\n    }\n  }\n\n\n  async edit(item?) {\n    const modal = await this.modal.create({\n      component: SupervisionEditPage,\n      componentProps:{\n        company_id: item?.company_id || 0,\n        project_id: item ? (item.project_id ? item.project_id : this.form.project_id) : this.form.project_id,\n      }\n    });\n    modal.present();\n    const { data } = await modal.onDidDismiss();\n    if(data) this.getList();\n  }\n\n  // async edit(item?) {\n  //   const modal = await this.modal.create({\n  //     component:ContractorEditPage,\n  //     componentProps:{\n  //       company_id: item?.company_id || 0,\n  //       project_id: item ? (item.project_id ? item.project_id : this.form.project_id) : this.form.project_id,\n  //     }\n  //   });\n  //   modal.present();\n  //   const { data } = await modal.onDidDismiss();\n  //   if(data) this.getList();\n  // }\n  // async getCtgoRegional() {\n  //   this.ctgoRegional  = await this.connect.run('/category/organization/regional/get',{},{});\n  //   if(this.ctgoRegional.rsCode === 0) {\n  //   }\n  // }\n  // async getCtgoBusiness(ev?) {\n  //   if(!ev) this.form.hq_business_id = 0;\n  //   this.ctgoBusiness  = await this.connect.run('/category/organization/business/get',\n  //   {\n  //     hq_regional_id:this.form.hq_regional_id\n  //   },{});\n  //   if(this.ctgoBusiness.rsCode === 0) {}\n  // }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzdXBlcnZpc2lvbi1saXN0LnBhZ2Uuc2NzcyJ9 */\";","export default \"\\n  <app-header-admin></app-header-admin>\\n  <ion-content>\\n    <app-row style=\\\"align-items: flex-start;\\\">\\n      <app-col size=\\\"280px\\\">\\n        <app-table type=\\\"card\\\">\\n          <ion-toolbar slot=\\\"top\\\" color=\\\"white\\\">\\n            <app-row style=\\\"justify-content: space-between;\\\">\\n              <app-col size=\\\"auto\\\"><h5>필터</h5></app-col>\\n              <app-col size=\\\"auto\\\">\\n                <app-button fill=\\\"translucent\\\" style=\\\"width: 100px;\\\" (click)=\\\"getList(0)\\\">검색</app-button>\\n              </app-col>\\n            </app-row>\\n          </ion-toolbar>\\n          <tbody>\\n            <!-- <tr>\\n              <td>\\n                <app-select label=\\\"지역본부\\\" [(ngModel)]=\\\"form.hq_regional_id\\\" (change)=\\\"getCtgoBusiness($event)\\\">\\n                  <app-select-option [value]=\\\"0\\\">전체</app-select-option>\\n                  <app-select-option *ngFor=\\\"let opt of ctgoRegional?.rsMap\\\" [value]=\\\"opt.hq_regional_id\\\">{{ opt.hq_regional_name }}</app-select-option>\\n                </app-select>\\n              </td>\\n            </tr>\\n            <tr>\\n              <td>\\n                <app-select label=\\\"사업본부\\\" [disabled]=\\\"!form.hq_regional_id\\\" [(ngModel)]=\\\"form.hq_business_id\\\">\\n                  <app-select-option [value]=\\\"0\\\">전체</app-select-option>\\n                  <app-select-option *ngFor=\\\"let opt of ctgoBusiness?.rsMap\\\" [value]=\\\"opt.hq_business_id\\\">{{ opt.hq_business_name }}</app-select-option>\\n                </app-select>\\n              </td>\\n            </tr> -->\\n            <tr>\\n              <td>\\n                <app-input label=\\\"검색어\\\" [(ngModel)]=\\\"form.search_text\\\" placeholder=\\\"검색어를 입력해 주세요.\\\"></app-input>\\n              </td>\\n            </tr>\\n          </tbody>\\n        </app-table>\\n      </app-col>\\n      <app-col>\\n        <ion-toolbar color=\\\"white\\\" *ngIf=\\\"user.userData.user_role === 'LH_HEAD'\\\">\\n          <ion-buttons slot=\\\"start\\\">\\n            <app-col>\\n              <app-button fill=\\\"translucent\\\" (click)=\\\"edit()\\\">신규 등록</app-button>\\n            </app-col>\\n          </ion-buttons>\\n        </ion-toolbar>   \\n        <ion-toolbar color=\\\"white\\\">\\n          <h5>감리사 목록 (총 {{res?.rsObj?.row_count || 0}}건)</h5>\\n        </ion-toolbar>\\n        <app-check-group>\\n          <app-table>\\n            <thead>\\n              <tr>\\n                <th style=\\\"width: 48px;\\\">No</th>\\n                <!-- <th>지역본부</th>\\n                <th>사업본부</th>\\n                <th>현장명</th> -->\\n                <th>감리사</th>\\n                <th>사업자등록번호</th>\\n                <th>대표자</th>\\n                <th>최근 업데이트</th>\\n                <th>작성자</th>\\n              </tr>\\n            </thead>\\n            <tbody>\\n              <tr class=\\\"button\\\" *ngFor=\\\"let item of res?.rsMap let i = index\\\" (click)=\\\"edit(item)\\\">\\n                <td>{{ item.index }}</td>\\n                <!-- <td>{{ item.hq_regional_name }}</td>\\n                <td>{{ item.hq_business_name }}</td>\\n                <td>{{ item.project_name }}</td> -->\\n                <td>{{ item.company_name }}</td>\\n                <td>{{ item.business_register_no }}</td>\\n                <td>{{ item.company_ceo }}</td>\\n                <td>{{ item.update_date }}</td>\\n                <td>{{ item.create_user_name }}</td>\\n              </tr>\\n            </tbody>\\n          </app-table>\\n        </app-check-group>\\n        <app-pager [totalCount]=\\\"res?.rsObj.row_count\\\" [limitNo]=\\\"form.limit_no\\\" (pagerChange)=\\\"getList($event)\\\"></app-pager>\\n      </app-col>\\n    </app-row>\\n  </ion-content>\\n\\n\";"],"sourceRoot":"webpack:///"}