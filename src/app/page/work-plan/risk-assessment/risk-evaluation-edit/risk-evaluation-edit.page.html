<ion-header>
  <ion-toolbar>
    <ion-title>
      <h4>원청사 로고</h4>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <h2>{{ form.risk_asment_type_text }} 위험성 평가표</h2>

  <app-approval 
  [project_id]="this.form.project_id"
  [ctgo_approval_module_id]="this.form.ctgo_approval_module_id"
  [approval_id]="this.form.approval_id"
  (deleteClick)="onDeleteClick($event)"
  (saveClick)="onSaveClick($event)"
  (sendClick)="onSendClick($event)"
  (recoveryClick)="onRecoveryClick($event)"
  (approvalClick)="onApprovalClick($event)"
  (change)="onApprovalChange($event)"></app-approval>

  <h4>기본정보</h4>

  <app-row mobileBreak>
    <app-col>
      <app-select-scene [(ngModel)]="form.project_id" [disabled]="true"></app-select-scene>
    </app-col>
    <app-col>
      <app-input-template label="회사명" [disabled]="true">
        <p slot="input">{{ form.company_name }}</p>
      </app-input-template>
    </app-col>
    <app-col>
      <app-select-construction [(ngModel)]="form.ctgo_construction_id" [disabled]="true"></app-select-construction>
    </app-col>
    <app-col>
      <app-select label="평가표 구분" [(ngModel)]="form.risk_asment_type" [required]="true" (change)="form.risk_asment_type_text = getTypeText(form.risk_asment_type)">
        <app-select-option value="최초">최초</app-select-option>
        <app-select-option value="정기">정기</app-select-option>
        <app-select-option value="수시">수시</app-select-option>
      </app-select>
    </app-col>
  </app-row>
  <app-row>
    <app-col>
      <app-input-group label="작업기간" [required]="true">
        <app-calendar [(ngModel)]="form.risk_asment_start_date" [max]="form.risk_asment_end_date" [readonly]="true"></app-calendar>
        ~
        <app-calendar [(ngModel)]="form.risk_asment_start_date" [min]="form.risk_asment_start_date" [readonly]="true"></app-calendar>
      </app-input-group>
    </app-col>

    <app-col>
      <app-input-template label="작성일" [disabled]="true">
        <p slot="input">{{ form.create_date }}</p>
      </app-input-template>
    </app-col>
    <app-col>
      <app-input-template label="작성자" [disabled]="true">
        <p slot="input">{{ form.user_name }}</p>
      </app-input-template>
    </app-col>
    <app-col>
      
    </app-col>
  </app-row>

  <app-row>
    <app-col>
      <h4>평가표 정보</h4>
    </app-col>
    <app-col size="auto">
      <app-button fill="translucent" (click)="add()">작성</app-button>
    </app-col>
  </app-row>

  <app-row>
    <app-col>
      <app-table>
        <thead>
          <tr>
            <th rowspan="2">공사명</th>
            <th rowspan="2" style="width: 100px;">단위작업</th>
            <th rowspan="2">장소</th>
            <th rowspan="2">건설기계</th>
            <th rowspan="2">특수 공도구</th>
            <th rowspan="2" style="width: 300px;">위험요인</th>
            <th colspan="3">위험성</th>
            <th rowspan="2" style="width: 300px;">감소대책</th>
          </tr>
          <tr>
            <th>빈도</th>
            <th>강도</th>
            <th>위험도</th>
          </tr>
        </thead>
        <tbody>
            <tr>
              <td rowspan="2">매립공사</td>
              <td rowspan="2">장비반입<br>/작업준비</td>
              <td rowspan="2">
                <app-button fill="translucent" size="small">
                  <app-img name="search"></app-img>
                </app-button>
              </td>
              <td rowspan="2">
                <app-button fill="translucent" size="small">
                  <app-img name="search"></app-img>
                </app-button>
              </td>
              <td rowspan="2">
                <app-button fill="translucent" size="small">
                  <app-img name="search"></app-img>
                </app-button>
              </td>
              <td rowspan="2">차량운행 경로 미지정으로 인한 차량 중돌 사고</td>
              <td rowspan="2">
                <app-select></app-select>
              </td>
              <td rowspan="2">
                <app-select></app-select>
              </td>
              <td rowspan="2">6</td>
              <td>차량 운행경로에 유도원 2명이상 배치</td>
            </tr>
            <tr>
              <td>지게차 이동 동선에 자재적재, 터 작업 등의 확인 점검</td>
            </tr>
        </tbody>
      </app-table>
    </app-col>
  </app-row>
  <app-row>
    <app-col>
      <h4>근로자 참석 명부</h4>
    </app-col>
    <app-col size="auto">
      <app-button fill="translucent">양식다운</app-button>
    </app-col>
    <app-col size="auto">
      <app-button fill="translucent">
        첨부
        <app-file [(ngModel)]="form.risk_file_data" [file]="form.file" [file_json]="form.file_json"></app-file>
      </app-button>
    </app-col>
  </app-row>
  <app-row>
    <app-col>
      <app-card href="https://i.ytimg.com/vi/b3rBSubQufc/maxresdefault.jpg" download="tree.jpg" target="_blank">
        참석자 명단
      </app-card>
    </app-col>
  </app-row>
</ion-content>