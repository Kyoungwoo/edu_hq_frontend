<ion-header>
  <ion-toolbar>
    <app-moniter-header></app-moniter-header>
    <app-card class="margin-card">
      <ion-row>
        <app-col size="3">
          <app-select>
            <app-select-option>전체</app-select-option>
          </app-select>
        </app-col>
        <app-col></app-col>
        <app-col size="auto">
          <app-button style="padding: 0;" color="primary" [fill]="'translucent'" [disabled]="true">
            <app-img style="width: 50px;" [src]="weather.weather_icon"></app-img>
          </app-button>
        </app-col>
        <app-col size="auto">
          <app-row class="weather-temp">
            {{ weather.weather_temp + "&deg;C"}}
          </app-row>
          <app-row class="ratio">
            {{ weather.high_weather_temp + "&deg;C" }}
            {{ weather.low_weather_temp + "&deg;C"}}
          </app-row>
        </app-col>
        <app-col class="colstyle" size="auto">
          <app-row class="title">
            강수량
          </app-row>
          <app-row class="ratio">
            {{ weather.weather_rain !== '강수없음' ? weather.weather_rain + "mm" : weather.weather_rain}}
          </app-row>
        </app-col>
        <app-col class="colstyle" size="auto">
          <app-row class="title">
            적설량
          </app-row>
          <app-row class="ratio">
            {{ weather.weather_snow !== '적설없음' ? weather.weather_pty : '-' }}
          </app-row>
        </app-col>
        <app-col class="colstyle" size="auto">
          <app-row class="title">
            최대풍속
          </app-row>
          <app-row class="ratio">
            {{ weather.weather_speed + "m/s"}}
          </app-row>
        </app-col>
        <app-col class="colstyle" size="auto">
          <app-row class="title">
            미세먼지
          </app-row>
          <app-row class="ratio">
            <app-img style="width: 20px;" [src]="dust.icon_url"></app-img>
            {{ dust.grade_name}}
          </app-row>
        </app-col>
      </ion-row>
    </app-card>
  </ion-toolbar>
</ion-header>

<ion-content>
  <app-row style="align-items: flex-start;" *ngIf="data.monitor === '통합관제' || !data.monitor">
    <app-col>
      <app-card color="white">
        <app-row style="align-items: stretch;">
          <app-col class="border-box donut-group">
            <ion-toolbar slot="top" color="white">
              <ion-row>
                <app-col>
                  <h4>금일 출역 근로자</h4>
                </app-col>
                <app-col size="auto">
                  <ion-chip class="chip-back">총 113명</ion-chip>
                </app-col>
              </ion-row>
            </ion-toolbar>
            <ion-row>
              <ion-col style="height: 300px;">
                <div style="position: relative;">
                  <ng-container *ngFor="let item of graphArrCount let i = index">
                    <div class="graph-box">
                      <div class="graph-count">{{ (graphArrCount.length - (i+1)) * 100}}</div>
                      <div class="grach-line"></div>
                    </div>
                  </ng-container>
                </div>
                <div class="graph-rod-group">
                  <ng-container *ngFor="let item of graphArr let i = index">
                    <div class="graph-rod-main">
                      <div class="graph-rod-tow"></div>
                      <!-- <div class="graph-rod-one"></div> -->
                      <div class="rod-name"
                        style="position: absolute; bottom: -55px; width: 100%; left: -30px; text-align: center; transform: rotate(-45deg);">
                        {{ item.date }}
                      </div>
                    </div>
                  </ng-container>
                </div>
              </ion-col>
            </ion-row>
          </app-col>
          <app-col class="donut-group">
            <ion-toolbar slot="top" color="white">
              <ion-row>
                <app-col>
                  <h4>금일 작업 근로자</h4>
                </app-col>
                <app-col size="auto">
                  <ion-chip class="chip-back">총 113명</ion-chip>
                </app-col>
              </ion-row>
            </ion-toolbar>
            <ion-row>
              <app-col style="position: relative;" size="7">
                <div style="width: 75%; position: relative;">
                  <svg class="donut-group" width="100%" height="100%" viewBox="0 0 42 42">
                    <circle class="donut-hole" cx="21" cy="21" r="15.91549430918954" fill="#fff"></circle>
                    <circle cx="21" cy="21" r="15.91549430918954" fill="transparent" stroke="#44C650" stroke-width="6">
                    </circle>
                    <circle cx="21" cy="21" r="15.91549430918954" fill="transparent" stroke="#2F8D38" stroke-width="6"
                      stroke-dasharray="50 50" stroke-dashoffset="25"></circle>
                  </svg>
                  <div class="donut-in-count">
                    33
                  </div>
                  <div class="donut-in-text">
                    총 작업
                  </div>
                </div>
              </app-col>
              <app-col class="graph-sub" size="4">
                <app-row>
                  <app-col size="auto" style="display: flex; align-items: center;">
                    <div class="circlel-plan"></div>
                    <p class="count-name">위험</p>
                  </app-col>
                  <app-col size="auto">
                    <p class="count-contant">6</p>
                  </app-col>
                </app-row>
                <app-row>
                  <app-col size="auto" style="display: flex; align-items: center;">
                    <div class="circlel-per"></div>
                    <p class="count-name">일반</p>
                  </app-col>
                  <app-col size="auto">
                    <p class="count-contant">50</p>
                  </app-col>
                </app-row>
              </app-col>
            </ion-row>
          </app-col>
          <!-- <app-col class="donut-group">
            <app-row>
              <app-col class="donut-group">
                <app-row>
                  <app-col>
                    <h4>공종별 출역 현황</h4>
                  </app-col>
                  <app-col size="auto">
                    <ion-chip class="chip-back">총 113명</ion-chip>
                  </app-col>
                </app-row>
                <app-row *ngFor="let item of graphArr4 let i = index">
                  <app-col size="auto" class="risk-type-name">{{ item.name }}</app-col>
                  <app-col style="display: flex; align-items: center;">
                    <div class="" style="height: 10px; background-color: red; margin-right: 10px; border-radius: 5px;"
                      [style.width]="item.count + '%'"></div>
                    <h4>{{item.count}}</h4>
                  </app-col>
                </app-row>
              </app-col>
            </app-row>
          </app-col> -->


          <!-- <app-col class="donut-group">
            <ion-row>
              <app-col>
                <h4>작업자 상태</h4>
              </app-col>
              <app-col></app-col>
              <app-col size="auto">
                <ion-chip class="chip-back">총 100명</ion-chip>
              </app-col>
            </ion-row>
            <ion-row>
              <ion-col>
                <app-graph-line style="width: 100%; height: 200px;">
                  <app-graph-group [color]="graphItem.color" [name]="graphItem.name" *ngFor="let graphItem of graph">
                    <app-graph-value *ngFor="let graphData of graphItem.data" [label]="graphData.label"
                      [value]="graphData.value"></app-graph-value>
                  </app-graph-group>
                </app-graph-line>
              </ion-col>
              <app-col class="graph-sub" size="4">
                <app-row>
                  <app-col style="display: flex;">
                    <p class="count-name">작업대기</p>
                  </app-col>
                  <app-col size="auto">
                    <p class="count-contant">50</p>
                  </app-col>
                </app-row>
                <app-row style="position: relative;">
                  <div class="dount-partner"></div>
                  <div class="dount-partner-sub"></div>
                </app-row>
                <app-row>
                  <app-col style="display: flex;">
                    <p class="count-name">작업중</p>
                  </app-col>
                  <app-col size="auto">
                    <p class="count-contant">50</p>
                  </app-col>
                </app-row>
                <app-row style="position: relative;">
                  <div class="dount-partner"></div>
                  <div class="dount-partner-sub"></div>
                </app-row>
                <app-row>
                  <app-col style="display: flex;">
                    <p class="count-name">작업종료</p>
                  </app-col>
                  <app-col size="auto">
                    <p class="count-contant">50</p>
                  </app-col>
                </app-row>
                <app-row style="position: relative;">
                  <div class="dount-partner"></div>
                  <div class="dount-partner-sub"></div>
                </app-row>
              </app-col>
            </ion-row>
          </app-col> -->
        </app-row>
      </app-card>

      <app-card color="white">
        <app-row style="align-items: stretch;">
          <app-col class="donut-group">
            <app-row>
              <app-col class="donut-group">
                <ion-toolbar slot="top" color="white">
                  <ion-row>
                    <app-col>
                      <h4>공종별 출역 작업자</h4>
                    </app-col>
                    <app-col size="auto">
                      <ion-chip class="chip-back">총 113명</ion-chip>
                    </app-col>
                  </ion-row>
                </ion-toolbar>
                <ion-row *ngFor="let item of graphArr2 let i = index">
                  <app-col size="2" class="risk-type-name">{{ item.name }}</app-col>
                  <app-col style="display: flex; align-items: center;">
                    <div style="height: 10px; background-color: red; margin-right: 10px; border-radius: 5px;"
                      [style.width]="item.count + '%'"></div>
                    <h4>{{item.count}}</h4>
                  </app-col>
                </ion-row>
              </app-col>
            </app-row>
          </app-col>

          <app-col class="middle-box donut-group">
            <app-row>
              <app-col class="donut-group">
                <ion-toolbar slot="top" color="white">
                  <ion-row>
                    <app-col>
                      <h4>작업자 상태</h4>
                    </app-col>
                    <app-col size="auto">
                      <ion-chip class="chip-back">총 113명</ion-chip>
                    </app-col>
                  </ion-row>
                </ion-toolbar>
                <ion-row *ngFor="let item of graphArr3 let i = index">
                  <app-col size="2" class="risk-type-name">{{ item.name }}</app-col>
                  <app-col style="display: flex; align-items: center;">
                    <div style="height: 10px; background-color: red; margin-right: 10px; border-radius: 5px;"
                      [style.width]="item.count + '%'"></div>
                    <h4>{{item.count}}</h4>
                  </app-col>
                </ion-row>
              </app-col>
            </app-row>
          </app-col>

          <app-col class="donut-group">
            <app-row>
              <app-col class="donut-group">
                <ion-toolbar slot="top" color="white">
                  <ion-row>
                    <app-col>
                      <h4>위험공종별 작업 계획</h4>
                    </app-col>
                    <app-col size="auto">
                      <ion-chip class="chip-back">총 113명</ion-chip>
                    </app-col>
                  </ion-row>
                </ion-toolbar>
                <ion-row *ngFor="let item of graphArr4 let i = index">
                  <app-col size="2" class="risk-type-name">{{ item.name }}</app-col>
                  <app-col style="display: flex; align-items: center;">
                    <div class="" style="height: 10px; background-color: red; margin-right: 10px; border-radius: 5px;"
                      [style.width]="item.count + '%'"></div>
                    <h4>{{item.count}}</h4>
                  </app-col>
                </ion-row>
              </app-col>
            </app-row>
          </app-col>
        </app-row>
      </app-card>

      <!-- <app-card>
        <app-row style="align-items: stretch;">
          <app-col class="donut-group">
            <app-row>
              <app-col>
                <h4>부적합 관리</h4>
              </app-col>
              <app-col></app-col>
              <app-col size="auto">
                <ion-chip class="chip-back">총 33명</ion-chip>
              </app-col>
            </app-row>
            <app-row>
              <app-col style="position: relative;" size="7">
                <div style="width: 100%; position: relative;">
                  <svg class="donut-group" width="100%" height="100%" viewBox="0 0 42 42">
                    <circle class="donut-hole" cx="21" cy="21" r="15.91549430918954" fill="#fff"></circle>
                    <circle cx="21" cy="21" r="15.91549430918954" fill="transparent" stroke="#ff9041" stroke-width="6"
                      stroke-dasharray="50 50" stroke-dashoffset="25"></circle>
                    <circle cx="21" cy="21" r="15.91549430918954" fill="transparent" stroke="#44C650" stroke-width="6"
                      stroke-dasharray="20 80" stroke-dashoffset="75"></circle>
                    <circle cx="21" cy="21" r="15.91549430918954" fill="transparent" stroke="#2F8D38" stroke-width="6"
                      stroke-dasharray="30 70" stroke-dashoffset="55"></circle>
                  </svg>
                  <div class="donut-in-count">
                    33
                  </div>
                  <div class="donut-in-text">
                    총 부적합
                  </div>
                </div>
              </app-col>
              <app-col class="graph-sub" size="4">
                <app-row>
                  <app-col size="auto" style="display: flex; align-items: center;">
                    <div class="circlel-plan"></div>
                    <p class="count-name">부적합 발생</p>
                  </app-col>
                  <app-col size="auto">
                    <p class="count-contant">50</p>
                  </app-col>
                </app-row>
                <app-row>
                  <app-col size="auto" style="display: flex; align-items: center;">
                    <div class="circlel-per"></div>
                    <p class="count-name">조치권고</p>
                  </app-col>
                  <app-col size="auto">
                    <p class="count-contant">50</p>
                  </app-col>
                </app-row>
                <app-row>
                  <app-col size="auto" style="display: flex; align-items: center;">
                    <div class="circlel-per"></div>
                    <p class="count-name">조치완료</p>
                  </app-col>
                  <app-col size="auto">
                    <p class="count-contant">50</p>
                  </app-col>
                </app-row>
              </app-col>
            </app-row>
          </app-col>
          <app-col class="middle-box donut-group">
            <ion-row>
              <app-col>
                <h4>위험등급별 작업 현황</h4>
              </app-col>
              <app-col size="auto">
                <ion-chip class="chip-back">총 113명</ion-chip>
              </app-col>
            </ion-row>
            <ion-row>
              <ion-col>
                <div style="position: relative;">
                  <ng-container *ngFor="let item of graphArrCount let i = index">
                    <div class="graph-box">
                      <div class="graph-count">{{ (graphArrCount.length - (i+1)) * 100}}</div>
                      <div class="grach-line"></div>
                    </div>
                  </ng-container>
                </div>
                <div class="graph-rod-group">
                  <ng-container *ngFor="let item of graphArr3 let i = index">
                    <div class="graph-rod-main-2">
                      <div class="graph-rod-tow-risk" [style]="'height:'+item.count/2+'px;'"></div>
                      <div class="risk-name">{{ item.name }}
                      </div>
                    </div>
                  </ng-container>
                </div>
              </ion-col>
            </ion-row>
          </app-col>
          <app-col class="middle-box donut-group">
            <app-row>
              <app-col>
                <h4>위험유혈별 작업 현황</h4>
              </app-col>
              <app-col size="auto">
                <ion-chip class="chip-back">총 113명</ion-chip>
              </app-col>
            </app-row>
            <app-row *ngFor="let item of graphArr4 let i = index">
              <app-col size="4" class="risk-type-name">{{ item.name }}</app-col>
              <app-col style="display: flex; align-items: center;">
                <div class="" style="height: 10px; background-color: red; margin-right: 10px; border-radius: 5px;"
                  [style.width]="item.count + '%'"></div>
                <h4>{{item.count}}</h4>
              </app-col>
            </app-row>
          </app-col>
        </app-row>
      </app-card> -->

    </app-col>
    <app-col style="flex: 0 0 250px;">
      <app-table type="card">
        <ion-toolbar slot="top" color="white">
          <ion-row style="justify-content: space-between;">
            <ion-col style="text-align: center;">
              <h4>스마트 안전 장비</h4>
            </ion-col>
            <app-col size="auto">
              <app-button>수정</app-button>
            </app-col>
          </ion-row>
        </ion-toolbar>
        <tbody>
          <tr>
            <td style="vertical-align: top;">
              <app-img style="width: 50px;" src="/assets/img/monitor/heavy.svg"></app-img>
            </td>
            <td class="table-text">
              <h5>
                중장비 접근감지
              </h5>
              <p>
                <app-row>
                  <app-col>보유 대수</app-col>
                  <app-col>3대</app-col>
                </app-row>
              </p>
              <p>
                <app-row>
                  <app-col>가동 중</app-col>
                  <app-col>3대</app-col>
                </app-row>
              </p>
              <p>
                <app-row>
                  <app-col>미가동</app-col>
                  <app-col>3대</app-col>
                </app-row>
              </p>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top;">
              <app-img style="width: 50px;" src="/assets/img/monitor/dangerarea.svg"></app-img>
            </td>
            <td class="table-text">
              <h5>
                위험지역 접근감지
              </h5>
              <p>
                <app-row>
                  <app-col>보유 대수</app-col>
                  <app-col>3대</app-col>
                </app-row>
              </p>
              <p>
                <app-row>
                  <app-col>가동 중</app-col>
                  <app-col>3대</app-col>
                </app-row>
              </p>
              <p>
                <app-row>
                  <app-col>미가동</app-col>
                  <app-col>3대</app-col>
                </app-row>
              </p>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top;">
              <app-img style="width: 50px;" src="/assets/img/monitor/safetyhook.svg"></app-img>
            </td>
            <td class="table-text">
              <h5>
                안전고리 체결
              </h5>
              <p>
                <app-row>
                  <app-col>보유 대수</app-col>
                  <app-col>3대</app-col>
                </app-row>
              </p>
              <p>
                <app-row>
                  <app-col>가동 중</app-col>
                  <app-col>3대</app-col>
                </app-row>
              </p>
              <p>
                <app-row>
                  <app-col>미가동</app-col>
                  <app-col>3대</app-col>
                </app-row>
              </p>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top;">
              <app-img style="width: 50px;" src="/assets/img/monitor/closeness.svg"></app-img>
            </td>
            <td class="table-text">
              <h5 style="margin-top: 10px;">
                밀폐공간 유해물질 감지
              </h5>
              <p>
                <app-row>
                  <app-col>보유 대수</app-col>
                  <app-col>3대</app-col>
                </app-row>
              </p>
              <p>
                <app-row>
                  <app-col>가동 중</app-col>
                  <app-col>3대</app-col>
                </app-row>
              </p>
              <p>
                <app-row>
                  <app-col>미가동</app-col>
                  <app-col>3대</app-col>
                </app-row>
              </p>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top;">
              <app-img style="width: 50px;" src="/assets/img/monitor/smart.svg"></app-img>
            </td>
            <td class="table-text">
              <h5>
                스마트 헬스케어 밴드
              </h5>
              <p>
                <app-row>
                  <app-col>보유 대수</app-col>
                  <app-col>3대</app-col>
                </app-row>
              </p>
              <p>
                <app-row>
                  <app-col>가동 중</app-col>
                  <app-col>3대</app-col>
                </app-row>
              </p>
              <p>
                <app-row>
                  <app-col>미가동</app-col>
                  <app-col>3대</app-col>
                </app-row>
              </p>
            </td>
          </tr>
        </tbody>
      </app-table>
    </app-col>
  </app-row>


  <app-row style="align-items: flex-start;" *ngIf="data.monitor === 'CCTV 모니터링'">
    <app-col>
      <app-card color="white">
        <app-row style="align-items: stretch;">
          <app-col class="donut-group">
            <app-row>
              <app-col>
                <h4>CCTV 설치 장소 1</h4>
              </app-col>
              <app-col></app-col>
              <app-col size="auto">
                <app-button>수정</app-button>
              </app-col>
            </app-row>
            <app-row>
              <app-col style="position: relative;">
                <div style="border: 1px solid; height: 500px; position: relative;">
                </div>
              </app-col>
            </app-row>
          </app-col>

          <app-col class="donut-group">
            <app-row>
              <app-col>
                <h4>CCTV 설치 장소 2</h4>
              </app-col>
              <app-col></app-col>
              <app-col size="auto">
                <app-button>수정</app-button>
              </app-col>
            </app-row>
            <app-row>
              <app-col style="position: relative;">
                <div style="border: 1px solid; height: 500px; position: relative;">
                </div>
              </app-col>
            </app-row>
          </app-col>
        </app-row>
      </app-card>
    </app-col>
  </app-row>


  <app-row style="align-items: flex-start;" *ngIf="data.monitor === 'CCTV 모니터링'">
    <app-col>
      <app-card color="white">
        <app-row style="align-items: stretch;">
          <app-col class="donut-group">
            <app-row>
              <app-col>
                <h4>CCTV 설치 장소 3</h4>
              </app-col>
              <app-col></app-col>
              <app-col size="auto">
                <app-button>수정</app-button>
              </app-col>
            </app-row>
            <app-row>
              <app-col style="position: relative;">
                <div style="border: 1px solid; height: 500px; position: relative;">
                </div>
              </app-col>
            </app-row>
          </app-col>

          <app-col class="donut-group">
            <app-row>
              <app-col>
                <h4>CCTV 설치 장소 4</h4>
              </app-col>
              <app-col></app-col>
              <app-col size="auto">
                <app-button>수정</app-button>
              </app-col>
            </app-row>
            <app-row>
              <app-col style="position: relative;">
                <div style="border: 1px solid; height: 500px; position: relative;">
                </div>
              </app-col>
            </app-row>
          </app-col>
        </app-row>
      </app-card>
    </app-col>
  </app-row>

  <app-row *ngIf="data.monitor === '근로자 실시간 위치 모니터링'">
    <app-col>
      <app-card>
        <app-row style="align-items: flex-start;">
          <app-col>
            <app-naver-map></app-naver-map>
          </app-col>
          <app-col size="4">
            <ion-toolbar color="light">
              <h5>수시 위험성평가 목록 (총90건)</h5>
            </ion-toolbar>
            <app-table>
              <thead>
                <tr>
                  <th>회사명</th>
                  <th>성명</th>
                  <th>공종</th>
                  <th>근로자 구분</th>
                </tr>
              </thead>
              <tbody>
                <td>구일종합건설(주)</td>
                <td>김준태</td>
                <td>토목</td>
                <td>작업자</td>
              </tbody>
            </app-table>
          </app-col>
        </app-row>
      </app-card>
    </app-col>
  </app-row>
</ion-content>