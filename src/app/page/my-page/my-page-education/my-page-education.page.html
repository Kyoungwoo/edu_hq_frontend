<ion-header>
  <ion-toolbar color="white">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/my-page-type"></ion-back-button>
    </ion-buttons>
    <ion-title>{{ languagePack.getText('교육 이력') }}</ion-title>
  </ion-toolbar>
  <ion-toolbar color="white">
    <app-input-template [label]="languagePack.getText('현장명')" (buttonClick)="getEducationSearch()">
      <p slot="input">{{ educationGetForm.project_name }}</p>
      {{ languagePack.getText('상세검색') }}
    </app-input-template>
  </ion-toolbar>
  <ion-toolbar color="white">
    <ion-segment color="primary" [(ngModel)]="segment">
      <ion-segment-button value="ONE">{{ languagePack.getText('주요 교육 현황') }}</ion-segment-button>
      <ion-segment-button value="TWO">{{ languagePack.getText('전체 교육 이력') }}</ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>


<ion-content>
  <app-container size="small">

    <div *ngIf="segment === 'ONE'">

      <h4>{{ languagePack.getText('채용 시') }}</h4>

      <app-table>
        <thead>
          <tr>
            <th>{{ languagePack.getText('교육명') }}</th>
            <th>{{ languagePack.getText('이수일') }}</th>
            <th>{{ languagePack.getText('시간') }}</th>
            <th>{{ languagePack.getText('교육 상태') }}</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{ educationHireRes?.rsObj?.ctgo_education_safe_name }}</td>
            <td>{{ educationHireRes?.rsObj?.education_date }}</td>
            <td>{{ educationHireRes?.rsObj?.education_complete_time }}</td>
            <td>
              <ng-container *ngIf="educationHireRes?.rsObj?.recruitment_state">
                <div class="round"
                [class.red]="educationHireRes?.rsObj?.recruitment_state !== '양호'"></div>
                {{ educationHireRes?.rsObj?.recruitment_state }}
              </ng-container>
            </td>
          </tr>
        </tbody>
      </app-table>

      <h4>{{ languagePack.getText('정기 교육') }}</h4>
      
      <app-table>
        <thead>
          <tr>
            <th>{{ languagePack.getText('교육명') }}</th>
            <th>{{ languagePack.getText('이수기간') }}</th>
            <th>{{ languagePack.getText('잔여일') }}</th>
            <th>{{ languagePack.getText('교육 상태') }}</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{ educationRoutineRes?.rsObj?.ctgo_education_safe_name }}</td>
            <td>{{ educationRoutineRes?.rsObj?.education_start_term }} ~ {{ educationRoutineRes?.rsObj?.education_end_term }}</td>
            <td>{{ educationRoutineRes?.rsObj?.remaining_date }}</td>
            <td>
              <ng-container *ngIf="educationRoutineRes?.rsObj?.require_state">
                <div class="round"
                [class.red]="educationRoutineRes.rsObj.require_state !== '양호'"></div>
                {{ educationRoutineRes.rsObj.require_state }}
              </ng-container>
            </td>
          </tr>
        </tbody>
      </app-table>

      <ng-container *ngIf="educationSpecialRes?.rsMap && res?.rsObj?.work_contract_type === '일용직'">
  
        <h4>{{ languagePack.getText('특별 교육') }}</h4>
  
        <app-table>
          <thead>
            <tr>
              <th>{{ languagePack.getText('교육명') }}</th>
              <th>{{ languagePack.getText('이수일') }}</th>
              <th>필요시간</th>
              <th>{{ languagePack.getText('교육 상태') }}</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of educationSpecialRes?.rsMap">
              <td>{{ item.ctgo_education_safe_name }}</td>
              <td>{{ item.education_date }}</td>
              <td>{{ item.education_need_time }}</td>
              <td>
                <ng-container *ngIf="item.special_state === '필요'">
                  <div class="round red"></div>
                  필요
                </ng-container>
                <ng-container *ngIf="item.special_state === '양호'">
                  <div class="round"></div>
                  양호
                </ng-container>
              </td>
            </tr>
          </tbody>
        </app-table>

      </ng-container>

      <ng-container *ngIf="educationSpecialRes?.rsMap && res?.rsObj?.work_contract_type === '상용직'">

        <h4>{{ languagePack.getText('특별 교육') }}</h4>
  
        <app-table>
          <thead>
            <tr>
              <th>{{ languagePack.getText('교육명') }}</th>
              <th>{{ languagePack.getText('이수기간') }}</th>
              <th>{{ languagePack.getText('잔여일') }}</th>
              <th>{{ languagePack.getText('교육 상태') }}</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of educationSpecialRes?.rsMap">
              <td>{{ item.ctgo_education_safe_name }}</td>
              <td>{{ item.education_start_term }} ~ {{ item.education_end_term }}</td>
              <td>{{ item.remaining_date }}</td>
              <td>
                <ng-container *ngIf="item.special_state === '양호'">
                  <div class="round"></div>
                  양호
                </ng-container>
                <ng-container *ngIf="item.special_state === '필요'">
                  <div class="round red"></div>
                  필요
                </ng-container>
                <ng-container *ngIf="item.special_state === '기한초과'">
                  <div class="round red"></div>
                  기한초과
                </ng-container>
              </td>
            </tr>
          </tbody>
        </app-table>

      </ng-container>

    </div>

    <!-- 교육 이력 -->
    <div *ngIf="segment === 'TWO'">

      <app-table>
        <thead>
          <tr>
            <th>NO</th>
            <th>{{ languagePack.getText('교육 구분') }}</th>
            <th>{{ languagePack.getText('교육명') }}</th>
            <th>{{ languagePack.getText('이수일') }}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of educationRes?.rsMap; let i = index;">
            <td>{{ i+1 }}</td>
            <td>{{ item.ctgo_education_safe_type }}</td>
            <td>{{ item.ctgo_education_safe_title }}</td>
            <td>{{ item.education_safe_date }}</td>
          </tr>
        </tbody>
      </app-table>

    </div>

  </app-container>
</ion-content>
