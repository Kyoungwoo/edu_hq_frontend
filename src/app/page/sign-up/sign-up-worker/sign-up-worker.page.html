<ion-header>
  <ion-toolbar color="white">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/sign-up-company"></ion-back-button>
    </ion-buttons>
    <ion-title>회원가입</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <app-container size="small">
    <app-sign-up-segment step="step2"></app-sign-up-segment>
    <form style="margin-top: 16px;">
      <app-card color="medium">{{ params.business_register_no }} / {{ params.company_name }}</app-card>
      <app-avatar [readonly]="false"></app-avatar>
      <app-row mobileBreak>
        <app-col>
          <app-input name="성명" label="성명" placeholder="이름을 입력해주세요." [(ngModel)]="form.user_name" [required]="true"></app-input>
        </app-col>
        <app-col>
          <app-input name="아이디" label="아이디" placeholder="영문과 숫자만 입력해주세요." 
          [color]="
          resOverlapId && resOverlapId.rsCode !== 0 ? 'warning' :
          resOverlapId && resOverlapId.rsCode === 0 ? 'primary' : 
          'white'"
          [(ngModel)]="form.account_id" (keyup)="overlapId()" [required]="true"></app-input>
          <app-input-caption color="warning" *ngIf="resOverlapId && resOverlapId.rsCode !== 0">{{ resOverlapId.rsMsg }}</app-input-caption>
          <app-input-caption color="primary" *ngIf="resOverlapId && resOverlapId.rsCode === 0">사용할 수 있는 아이디 입니다.</app-input-caption>
        </app-col>
      </app-row>
      <app-row mobileBreak>
        <app-col>
          <app-input name="비밀번호" label="비밀번호" placeholder="영문, 숫자, 조합(6~20자)" type="password"
          [(ngModel)]="form.account_token" [required]="true"></app-input>
        </app-col>
        <app-col>
          <app-input name="비밀번호 확인" label="비밀번호 확인" placeholder="비밀번호를 재입력 해주세요." type="password" 
          [color]="
          confirm.account_token && form.account_token !== confirm.account_token ? 'warning' :
          confirm.account_token && form.account_token === confirm.account_token ? 'primary' :
          'white'"
          [(ngModel)]="confirm.account_token" [required]="true"></app-input>
        </app-col>
      </app-row>
      <app-input-caption color="warning" *ngIf="confirm.account_token && form.account_token !== confirm.account_token">비밀번호와 비밀번호 확인이 다릅니다.</app-input-caption>
      <app-row mobileBreak>
        <app-col>
          <app-calendar name="생년월일" label="생년월일" [(ngModel)]="form.user_birth" [required]="true"></app-calendar>
        </app-col>
        <app-col>
          <app-radio-input name="성별" label="성별" value="남" [(ngModel)]="form.user_gender" [required]="true">
            <app-radio value="남">남</app-radio>
            <app-radio value="여">여</app-radio>
          </app-radio-input>
        </app-col>
      </app-row>
      <app-row mobileBreak>
        <app-col>
          <app-input name="휴대폰" label="휴대폰" placeholder="-없이 숫자만 입력해주세요." type="tel" 
          [(ngModel)]="form.user_phone" (keyup.enter)="overlapPhone" (buttonClick)="aligoCheck()" [required]="true">
            인증번호<br>받기
          </app-input>
        </app-col>
        <app-col>
          <app-input @fadeAnimation *ngIf="resAligoCheck && resAligoCheck.rsCode === 0" name="인증번호" label="인증번호" placeholder="인증번호를 입력해주세요." type="tel" [(ngModel)]="form.sms_token" [required]="true">
            확인
          </app-input>
        </app-col>
      </app-row>
      <app-row mobileBreak>
        <app-col>
          <app-email name="이메일" label="이메일" [(ngModel)]="form.user_email" [required]="true"></app-email>
        </app-col>
        <app-col>
          <app-select-country name="국가" [(ngModel)]="form.ctgo_country_id" [required]="true"></app-select-country>
        </app-col>
      </app-row>
      <app-row mobileBreak>
        <app-col>
          <app-input-template label="기초안전보건교육 이수증">
            <p slot="input">기초안전보건교육 이수증</p>
            파일찾기
            <app-file name="기초안전보건교육 이수증" [(ngModel)]="confirm.file" [file]="form.file" [file_json]="form.file_json"></app-file>
          </app-input-template>
        </app-col>
        <app-col>
          <app-calendar name="건설업 기초 안전보건교육 이수일" label="건설업 기초 안전보건교육 이수일" [(ngModel)]="form.basic_safe_edu_date"></app-calendar>
        </app-col>
      </app-row>
      <app-input name="현장명" label="현장명" [(ngModel)]="form.project_id">
        <app-img name="search"></app-img>
      </app-input>
    </form>
  </app-container>
</ion-content>
<app-button-footer>
  <app-button routerLink="/sign-up-company" [queryParams]="{userType: 'WORKER'}" routerDirection="back">이전</app-button>
  <app-button routerLink="/sign-up-terms" [queryParams]="{userType: 'WORKER'}">다음</app-button>
</app-button-footer>
